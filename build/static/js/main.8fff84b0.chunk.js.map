{"version":3,"sources":["api/index.js","slices/sessionSlice.js","components/routes/privateRoute.js","components/routes/loginRoute.js","components/routes/mainRoute.js","components/routes/userRoute.js","hooks/useMediaQuery.js","hooks/useMakeNTU.js","hooks/useBreakpoints.js","containers/drawer/index.js","containers/main/TopSection.js","containers/main/Footer.js","containers/main/index.js","containers/login/index.js","containers/userProgress/Components/SearchBar.js","containers/userProgress/Components/Selector.js","containers/userProgress/Components/Cards.js","containers/userProgress/Components/ResetWindow.js","containers/userProgress/Body.js","containers/userProgress/index.js","containers/userStatus/AlertWindow.js","containers/userStatus/UserRowContent.js","containers/userStatus/UserRow.js","containers/userStatus/Cards.js","containers/userStatus/Body.js","containers/userStatus/index.js","containers/teamData/TeamTable.js","containers/teamData/index.js","containers/adminBoardList/ConsoleHeader.js","components/adminCard.js","components/ImgDialog.js","components/templateCard.js","containers/adminBoardList/BoardConsole.js","components/searchBar.js","containers/adminBoardList/ConsoleFooter.js","containers/adminBoardList/index.js","containers/requestStatus/components/GroupContentElement.js","containers/requestStatus/components/GroupContent.js","containers/requestStatus/components/GroupStatus.js","containers/requestStatus/StatusConsole.js","containers/requestStatus/components/RequestStatusContent.js","containers/requestStatus/components/RequestStatus.js","containers/requestStatus/RequestConsole.js","containers/requestStatus/index.js","components/loading.js","App.js","store/index.js","serviceWorker.js","theme.js","index.js"],"names":["errorHandling","error","response","status","window","location","replace","SessionAPI","axios","get","teamID","password","post","qs","stringify","headers","delete","TeamDataAPI","params","teamName","authority","myCards","requests","catch","teams","ids","data","team","put","PasswordAPI","passwords","sessionSlice","createSlice","name","initialState","initialized","isLogin","userID","userName","reducers","setLogin","state","action","payload","setLogout","setInitialized","actions","selectSession","session","PrivateRoute","children","path","useSelector","render","to","LoginRoute","MainRoute","exact","UserRoute","useMediaQuery","query","useState","matches","setMatches","useEffect","mediaQuery","matchMedia","handler","event","addEventListener","removeEventListener","client","WebSocket","MakeNTUContext","React","createContext","dataINIT","WSINIT","userBoardINIT","sendData","cardData","addBoard","deleteBoard","updateBoards","getBoards","setUpdateBoardStatus","alert","addBoardData","getBoardData","updateBoardStatus","showAlert","setAlert","userRequest","getUser","userCards","requestData","getRequest","updateReq","updateReturn","teamReqUpdateDate","breakpoints","handleReplaceBoard","MakeNTUProvider","props","setGetBoardData","setUserCards","setCardData","setRequestData","setTeamReqUpdateDate","setUserRequest","setRender","userProgressStatus","setUserProgressStatus","theme","useTheme","isXs","values","sm","isSm","phone","isPhone","md","isMd","lg","isLg","xl","isXl","active","useBreakpoints","onmessage","byteString","JSON","parse","task","msgStatus","msg","onclose","delay","ms","Promise","res","setTimeout","newCard","limit","category","totalNum","remain","image","id","uuidv4","group","requestBody","send","severity","duration","open","Provider","value","cancelRequest","deleteRequestFromUser","subscribe","resetDataBase","useMakeNTU","useContext","drawerWidth","useStyles","makeStyles","drawer","width","flexShrink","whiteSpace","position","zIndex","root","appBar","paddingTop","spacing","color","boxShadow","transition","transitions","create","easing","sharp","leavingScreen","appBarShift","up","marginLeft","enteringScreen","hide","display","appBarTypography","flexGrow","drawerOpen","drawerClose","overflowX","overflowY","menuButton","marginRight","iconButton","toolbar","marginTop","alignItems","justifyContent","padding","mixins","content","contentShift","easeOut","offset","Drawer","history","useHistory","classes","setOpen","dispatch","useDispatch","handleDrawerClose","itemList","text","icon","className","CssBaseline","AppBar","clsx","sx","backgroundColor","Toolbar","IconButton","onClick","edge","Typography","variant","style","cursor","push","anchor","innerWidth","paper","List","map","ListItem","button","component","Link","ListItemIcon","ListItemText","primary","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","Alert","Top","height","overflow","margin","textAlign","time","fontWeight","Grid","container","direction","maxWidth","maxHeight","item","gutterBottom","opacity","textDecoration","marginBottom","Button","fontSize","FooterContainer","styled","div","Text","h1","Members","Footer","Main","page","Copyright","align","Date","getFullYear","flexDirection","borderRadius","avatar","palette","secondary","main","form","submit","accountmargin","Login","account","showPassword","setValues","handleChange","prop","target","handleSubmit","e","preventDefault","test","console","Container","Avatar","noValidate","onSubmit","OutlinedInput","required","fullWidth","placeholder","autoComplete","onChange","autoFocus","type","endAdornment","InputAdornment","onMouseDown","my","Box","SearchBar","visibility","handleCheck","searchMethod","Paper","p","m","FormControl","RadioGroup","row","FormControlLabel","control","Radio","label","InputBase","ml","flex","onKeyDown","key","Selector","df","setDf","defaultValue","a","i","makeArray","minWidth","size","InputLabel","Select","labelId","addNeedList","MenuItem","Img","Card","num","setNum","needList","left","v","mode","ButtonBase","alt","src","minHeight","xs","tag","slice","Math","min","ResetWindow","handleResetClose","handleResetAgree","Dialog","DialogTitle","DialogActions","steps","Wrapper","Body","activeStep","setActiveStep","rerender","setRerender","searchWord","setSearchWord","setSearchMethod","userCardData","setUserCardData","ableNext","setAbleNext","orders","setOrders","resetOpen","setResetOpen","order","quantity","Object","keys","length","reset","servermsg","forEach","calcuLimit","boardName","groupLimit","rq","rb","board","mb","Stepper","Step","StepLabel","mt","dense","toLowerCase","flexWrap","alignContent","indexOf","pt","disabled","prevActiveStep","App","AlertWindow","handleAlertClose","handleAlertAgree","rowContent","alertOpen","setAlertOpen","TableCell","paddingBottom","colSpan","Collapse","in","timeout","unmountOnExit","Table","TableHead","TableRow","TableBody","detailRow","scope","_id","Chip","Row","timer","setTimer","intervalId","useRef","d","getTime","pretime","parseInt","floor","sendingTime","current","setInterval","t","clearInterval","borderBottom","border","pl","py","px","showTime","userBoard","TextField","setUserBoard","myRequest","setMyRequest","ub","filter","ubb","TableContainer","element","descendingComparator","b","orderBy","getComparator","stableSort","array","comparator","stabilizedThis","el","index","sort","headCells","numeric","disablePadding","EnhancedTableHead","onSelectAllClick","numSelectedInPage","rowCount","onRequestSort","head","headCell","Checkbox","indeterminate","checked","inputProps","sortDirection","TableSortLabel","sortlabel","property","visuallyHidden","useToolbarStyles","paddingLeft","paddingRight","highlight","lighten","light","dark","title","EnhancedTableToolbar","rootClasses","numSelected","search","setSearch","handleDelete","setPage","Input","handleSearch","Tooltip","placement","table","clip","top","tablecell","checkbox","copy","TeamTable","handleEdit","selected","setSelected","setOrder","setOrderBy","rowsPerPage","setRowsPerPage","teamFilter","toUpperCase","startsWith","stickyHeader","n","includes","nowSelecteds","newSelecteds","concat","isItemSelected","hover","role","tabIndex","selectedIndex","newSelected","handleClick","TablePagination","rowsPerPageOptions","count","onPageChange","newPage","onRowsPerPageChange","characters","charactersLength","genPassword","result","charAt","random","authorityData","input","TeamData","setData","loaded","setLoaded","filename","setFilename","uploaded","setUploaded","addOpen","setAddOpen","addMultipleOpen","setAddMultipleOpen","csv","setCsv","editId","setEditId","deleteOpen","setDeleteOpen","deleteIds","setDeleteIds","invalidDelete","setInvalidDelete","regenerateOpen","setRegenerateOpen","downloadOpen","setDownloadOpen","invalidRegenerate","setInvalidRegenerate","errors","setErrors","errorsMsg","setErrorsMsg","newTeamMultiple","setNewTeamMultiple","newTeam","setNewTeam","handleTeamDataReload","handleCloseAddMultiple","handleCloseAdd","handleCloseEdit","handleCloseDelete","handleCloseRegenerate","handleCloseDownload","testRepeatId","handleUploadCsv","efile","Papa","skipEmptyLines","complete","results","valid","repeat","newData","reduce","obj","cur","handleAddMultipleTeams","Number","csvData","unparse","download","document","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","handleGeneratePassword","updateData","new_password","judgeNewTeam","newErrors","newErrorsMsg","handleAddTeam","handleEditTeam","handleDeleteTeam","disableBackdropClick","DialogContent","helperText","find","htmlFor","accept","files","justify","String","HeaderContainer","ButtonContainer","Header","setSaving","ableSave","importOpen","setImportOpen","exportOpen","setExportOpen","newBoardData","setNewBoardData","fileName","importError","setImportError","resetPageOpen","setResetPageOpen","handleCloseImport","testRepeatArr","arr","Set","handleCloseExport","handleCloseReset","IDArr","NameArr","repeatID","repeatName","NumberFormatCustom","forwardRef","ref","other","getInputRef","onValueChange","CardMedia","ComplexGrid","handleDeleteCard","changedData","setChangedData","changingValue","existing","borderWidth","borderColor","InputProps","inputComponent","right","ImgDialog","uploadImg","setOpenDialog","myURL","setMyURL","handleClose","link","DialogContentText","setAddCardData","openDialog","hasFocus","setHasFocus","handleKeyDown","onFocus","select","BoardConsole","keyWord","saving","setAbleSave","cards","setCards","addCardData","delCardID","setDelCardID","background","undefined","card","trim","remainCards","ConsoleFooter","setKeyWord","BoardPage","searchKeyWord","BoardRequestContentElement","changeReturn","numReturn","newNum","GroupContent","setNumReturn","boards","setBoards","newReturn","newBoards","GroupContentElement","entries","isNaN","returned","BoardRequest","notReturned","StatusConsole","userStatus","setUserStatus","userData","teamA","teamB","notReturned_A","notReturned_B","GroupStatus","GroupStatusContent","detail","requestID","requestStatus","borrower","RequestStatus","setIntervalID","Id","sec","pending","solved","ready","denied","cancel","expired","TabPanel","hidden","a11yProps","RequestConsole","setValue","setRequests","Tabs","scrollButtons","indicatorColor","textColor","newValue","Tab","request","ConsoleWrapper","RequestPage","progress","Loading","CircularProgress","Routes","userSelect","configureStore","reducer","sessionReducer","Boolean","hostname","match","createTheme","typography","fontFamily","join","contrastText","overrides","MuiCssBaseline","backgroundRepeat","backgroundAttachment","ReactDOM","StrictMode","ThemeProvider","store","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.8fff84b0.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\nconst errorHandling = (error) => {\r\n  if (error.response.status === 403) window.location.replace(\"/\");\r\n};\r\n\r\nexport const SessionAPI = {\r\n  getSession: () => axios.get(`/api/session`),\r\n  postSession: (teamID, password) =>\r\n    axios.post(\r\n      `/api/session`,\r\n      qs.stringify({\r\n        teamID,\r\n        password,\r\n      }),\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n      }\r\n    ),\r\n  deleteSession: () => axios.delete(`/api/session`),\r\n};\r\n\r\nexport const TeamDataAPI = {\r\n  getTeamData: () =>\r\n    axios\r\n      .get(`/api/users`, {\r\n        params: {\r\n          teamName: 1,\r\n          authority: 1,\r\n          myCards: 1,\r\n          requests: 1,\r\n        },\r\n      })\r\n      .catch((error) => errorHandling(error)),\r\n  postTeamData: (teams) =>\r\n    axios.post(`/api/users`, teams).catch((error) => errorHandling(error)),\r\n  deleteTeamData: (ids) =>\r\n    axios\r\n      .delete(`/api/users`, { data: [...ids] })\r\n      .catch((error) => errorHandling(error)),\r\n  putTeamData: (team) =>\r\n    axios.put(`/api/users`, team).catch((error) => errorHandling(error)),\r\n};\r\n\r\nexport const PasswordAPI = {\r\n  putPassword: (passwords) =>\r\n    axios\r\n      .put(`/api/password`, passwords)\r\n      .catch((error) => errorHandling(error)),\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { SessionAPI } from \"../api\";\r\n\r\nexport const sessionSlice = createSlice({\r\n  name: \"session\",\r\n  initialState: {\r\n    initialized: false,\r\n    isLogin: false,\r\n    authority: null,\r\n    userID: null,\r\n    userName: null,\r\n  },\r\n  reducers: {\r\n    //login\r\n    setLogin: (state, action) => {\r\n      state.isLogin = true;\r\n      state.authority = action.payload.authority;\r\n      state.userID = action.payload.teamID;\r\n      state.userName = action.payload.teamName;\r\n    },\r\n    setLogout: (state) => {\r\n      state.isLogin = false;\r\n      state.authority = null;\r\n      state.userID = null;\r\n      state.userName = null;\r\n    },\r\n    //initialize\r\n    setInitialized: (state) => {\r\n      state.initialized = true;\r\n    },\r\n  },\r\n});\r\n\r\n//check whether isLogin is true(session.status==\"200\") first\r\nexport const init = () => async (dispatch) => {\r\n  try {\r\n    const session = await SessionAPI.getSession();\r\n    if (session.status === 200) {\r\n      dispatch(setLogin(session.data));\r\n      dispatch(setInitialized());\r\n    }\r\n  } catch (err) {\r\n    dispatch(setInitialized());\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  const session = await SessionAPI.deleteSession();\r\n  dispatch(setLogout());\r\n};\r\n\r\nexport const { setLogin, setLogout, setInitialized } = sessionSlice.actions;\r\n\r\nexport const selectSession = (state) => state.session;\r\n\r\nexport default sessionSlice.reducer;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n// slices\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\n// for admin \r\nexport default function PrivateRoute({ children, path }) {\r\n  const { isLogin, authority } = useSelector(selectSession);\r\n  return (\r\n    <Route\r\n      path={path}\r\n      render={() => {\r\n        if (!isLogin) return <Redirect to=\"/login\" />;\r\n        if (authority === 0 )\r\n          return <Redirect to=\"/\" />;\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n// slices\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\nexport default function LoginRoute({ children, path }) {\r\n  const { isLogin } = useSelector(selectSession);\r\n  return (\r\n    <Route\r\n      path={path}\r\n      render={() => {\r\n        return isLogin ? <Redirect to=\"/\" /> : children;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nexport default function MainRoute({ children, path }) {\r\n  return (\r\n    <Route\r\n      exact\r\n      path={path}\r\n      render={() => {\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n// slices\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\n// for user\r\nexport default function UserRoute({ children, path }) {\r\n  const { isLogin, authority } = useSelector(selectSession);\r\n  return (\r\n    <Route\r\n      path={path}\r\n      render={() => {\r\n        if (!isLogin) return <Redirect to=\"/login\" />;\r\n        if (authority !== 0)\r\n          return <Redirect to=\"/\" />;\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function useMediaQuery(query) {\r\n  const [matches, setMatches] = useState(false);\r\n  useEffect(() => {\r\n    const mediaQuery = window.matchMedia(query);\r\n    // // console.log(\"hi media\", mediaQuery);\r\n    setMatches(mediaQuery.matches);\r\n    const handler = (event) => setMatches(event.matches);\r\n    mediaQuery.addEventListener(\"change\", handler);\r\n    return () => mediaQuery.removeEventListener(\"change\", handler);\r\n  }, []);\r\n  return matches;\r\n}\r\n","// const React = require(\"react\");\r\n\r\n//import { useState, createContext, useContext, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport useBreakpoints from \"./useBreakpoints\";\r\nconst client = new WebSocket(\"ws://localhost:8000\"); //step 2\r\n\r\nconst MakeNTUContext = React.createContext({\r\n  dataINIT: () => {},\r\n  WSINIT: () => {},\r\n  userBoardINIT: () => {},\r\n  sendData: () => {},\r\n  cardData: [],\r\n  addBoard: () => {},\r\n  deleteBoard: () => {},\r\n  updateBoards: () => {},\r\n  getBoards: () => {},\r\n  setUpdateBoardStatus: () => {},\r\n  alert: {},\r\n  addBoardData: {},\r\n  getBoardData: [],\r\n  updateBoardStatus: \"\",\r\n  showAlert: () => {},\r\n  setAlert: () => {},\r\n  userRequest: [],\r\n  getUser: () => {},\r\n  userCards: [],\r\n  requestData: [],\r\n  getRequest: () => {},\r\n  updateReq: () => {},\r\n  updateReturn: () => {},\r\n  teamReqUpdateDate: [],\r\n  breakpoints: {},\r\n  handleReplaceBoard: () => {},\r\n  breakpoints: {},\r\n  cancelRequest: () => {},\r\n  deleteRequestFromUser: () => {},\r\n  subscribe: () => {},\r\n  render: [],\r\n  setRender: () => {},\r\n  userProgressStatus: [],\r\n  resetDataBase: () => {},\r\n});\r\n\r\nconst MakeNTUProvider = (props) => {\r\n  const [alert, setAlert] = React.useState({});\r\n  const [addBoardData, setAddBoardData] = React.useState({});\r\n  const [getBoardData, setGetBoardData] = React.useState([]);\r\n  const [updateBoardStatus, setUpdateBoardStatus] = React.useState(\"\");\r\n  const [userCards, setUserCards] = React.useState([]);\r\n  const [cardData, setCardData] = React.useState([]);\r\n  const [requestData, setRequestData] = React.useState([]);\r\n  const [teamReqUpdateDate, setTeamReqUpdateDate] = React.useState([]);\r\n  const [userRequest, setUserRequest] = React.useState([]);\r\n  const [render, setRender] = React.useState(false);\r\n  const [userProgressStatus, setUserProgressStatus] = React.useState([]);\r\n  const breakpoints = useBreakpoints();\r\n\r\n  client.onmessage = async (byteString) => {\r\n    //收回傳訊息\r\n    const { data } = byteString;\r\n    const [task, payload] = JSON.parse(data);\r\n\r\n    // console.log(task, payload);\r\n    switch (task) {\r\n      case \"USERPROGRESSSTATUS\":\r\n        setUserProgressStatus(payload);\r\n        break;\r\n      case \"GETUSER\": {\r\n        setUserRequest(payload.requests ?? []);\r\n        setUserCards({ ...payload.myCards } ?? []);\r\n        getBoards();\r\n        break;\r\n      }\r\n      case \"GETREQUEST\": {\r\n        setRequestData(payload);\r\n        break;\r\n      }\r\n      case \"INITUSERCARD\": {\r\n        setCardData(payload);\r\n        // console.log(payload);\r\n        break;\r\n      }\r\n      case \"status\": {\r\n        const [msgStatus, msg] = payload;\r\n        showAlert(msgStatus, msg);\r\n        //setStatus(payload);\r\n        break;\r\n      }\r\n      case \"AddBoard\": {\r\n        setGetBoardData(payload);\r\n        setCardData(payload);\r\n        break;\r\n      }\r\n      case \"GETBOARD\": {\r\n        setGetBoardData(payload);\r\n        setUpdateBoardStatus(\"\");\r\n        setRender(true);\r\n        break;\r\n      }\r\n      case \"UpdateBoard\": {\r\n        // // console.log(payload);\r\n        setUpdateBoardStatus(payload.status);\r\n        if (payload.status === \"success\") setGetBoardData(payload.data);\r\n        break;\r\n      }\r\n      case \"UPDATEREQUEST\": {\r\n        setRequestData(payload);\r\n        break;\r\n      }\r\n      case \"UPDATERETURN\": {\r\n        setTeamReqUpdateDate(payload);\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  client.onclose = () => {\r\n    showAlert(\"error\", \"Connection Error. Please Refresh Later!\");\r\n  };\r\n  const delay = (ms) => new Promise((res) => setTimeout(res, ms));\r\n\r\n  const dataINIT = async () => {\r\n    const newCard = {\r\n      limit: 5,\r\n      category: \"arduino\",\r\n      totalNum: 50,\r\n      remain: 50,\r\n      image: \"\",\r\n    };\r\n    addBoard({ ...newCard, name: \"board 1\", id: uuidv4() });\r\n    addBoard({ ...newCard, name: \"board 2\", id: uuidv4() });\r\n    addBoard({ ...newCard, name: \"board 3\", id: uuidv4() });\r\n    addBoard({ ...newCard, name: \"board 4\", id: uuidv4() });\r\n    addBoard({ ...newCard, name: \"board 5\", id: uuidv4() });\r\n    await delay(5000);\r\n    sendData([\r\n      \"REQUEST\",\r\n      {\r\n        group: \"1\",\r\n        requestBody: [\r\n          [\"board 1\", 2],\r\n          [\"board 2\", 3],\r\n        ],\r\n      },\r\n    ]);\r\n    // await delay(1000);\r\n    sendData([\r\n      \"REQUEST\",\r\n      {\r\n        group: \"2\",\r\n        requestBody: [\r\n          [\"board 1\", 2],\r\n          [\"board 3\", 3],\r\n        ],\r\n      },\r\n    ]);\r\n    sendData([\r\n      \"REQUEST\",\r\n      {\r\n        group: \"3\",\r\n        requestBody: [\r\n          [\"board 3\", 2],\r\n          [\"board 1\", 1],\r\n        ],\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const sendData = (data) => {\r\n    client.send(JSON.stringify(data));\r\n  };\r\n  const showAlert = (severity, msg, duration) => {\r\n    //success,error\r\n    setAlert({ open: true, severity, msg, duration });\r\n  };\r\n  const WSINIT = (payload) => {\r\n    sendData([\"WSINIT\", payload]);\r\n  };\r\n  const subscribe = (payload) => {\r\n    sendData([\"SUBSCRIBE\", payload]);\r\n  };\r\n  const userBoardINIT = (payload) => {\r\n    sendData([\"INITUSERCARD\", payload]);\r\n  };\r\n  const addBoard = (payload) => {\r\n    // console.log(\"adding\");\r\n    sendData([\"ADDBOARD\", payload]); //Board data\r\n  };\r\n  const deleteBoard = (payload) => {\r\n    sendData([\"DELETEBOARD\", payload]); //ID\r\n  };\r\n  const updateBoards = (payload) => {\r\n    sendData([\"UPDATEBOARDS\", payload]); //[Board data]\r\n  };\r\n  const updateReq = (payload) => {\r\n    //{ requestID, requestStatus }\r\n    sendData([\"UPDATEREQ\", payload]);\r\n  };\r\n  const getBoards = () => {\r\n    sendData([\"GETBOARD\"]);\r\n  };\r\n  const getUser = (payload) => {\r\n    sendData([\"GETUSER\", payload]);\r\n  };\r\n  const cancelRequest = (payload) => {\r\n    sendData([\"CANCELREQUEST\", payload]);\r\n  };\r\n  const deleteRequestFromUser = (payload) => {\r\n    sendData([\"DELETEREQUESTFROMUSER\", payload]);\r\n  };\r\n\r\n  const getRequest = (payload) => {\r\n    sendData([\"GETREQUEST\", payload]);\r\n  };\r\n  const updateReturn = (payload) => {\r\n    sendData([\"UPDATERETURN\", payload]);\r\n  };\r\n  const handleReplaceBoard = (payload) => {\r\n    sendData([\"REPLACEBOARD\", payload]);\r\n  };\r\n  const resetDataBase = () => {\r\n    sendData([\"RESETDATABASE\"]);\r\n  };\r\n  return (\r\n    <MakeNTUContext.Provider\r\n      value={{\r\n        dataINIT,\r\n        userBoardINIT,\r\n        WSINIT,\r\n        addBoard,\r\n        deleteBoard,\r\n        updateBoards,\r\n        getBoards,\r\n        setUpdateBoardStatus,\r\n        alert,\r\n        addBoardData,\r\n        getBoardData,\r\n        updateBoardStatus,\r\n        showAlert,\r\n        setAlert,\r\n        sendData,\r\n        cardData,\r\n        getUser,\r\n        userRequest,\r\n        getRequest,\r\n        userCards,\r\n        cancelRequest,\r\n        deleteRequestFromUser,\r\n        breakpoints,\r\n        handleReplaceBoard,\r\n        updateReq,\r\n        updateReturn,\r\n        requestData,\r\n        teamReqUpdateDate,\r\n        subscribe,\r\n        render,\r\n        setRender,\r\n        userProgressStatus,\r\n        resetDataBase,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nconst useMakeNTU = () => React.useContext(MakeNTUContext);\r\n\r\nexport { MakeNTUProvider, useMakeNTU };\r\n","import useMediaQuery from \"./useMediaQuery\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\n/**\r\n * Get a set of boolean representing which breakpoint is active\r\n * and which breakpoints are inactive.\r\n *\r\n * Inspired by: https://github.com/contra/react-responsive/issues/162#issuecomment-592082035\r\n */\r\nexport default function useBreakpoints() {\r\n  const theme = useTheme();\r\n  //   // console.log(theme);\r\n  const breakpoints = {\r\n    isXs: useMediaQuery(`(max-width: ${theme.breakpoints.values.sm}px)`),\r\n    isSm: useMediaQuery(\r\n      `(min-width: ${theme.breakpoints.values.sm + 1}px) and (max-width: ${\r\n        theme.breakpoints.values.phone\r\n      }px)`\r\n    ),\r\n    isPhone: useMediaQuery(\r\n      `(min-width: ${theme.breakpoints.values.phone + 1}px) and (max-width: ${\r\n        theme.breakpoints.values.md\r\n      }px)`\r\n    ),\r\n    isMd: useMediaQuery(\r\n      `(min-width: ${theme.breakpoints.values.md + 1}px) and (max-width: ${\r\n        theme.breakpoints.values.lg\r\n      }px)`\r\n    ),\r\n    isLg: useMediaQuery(\r\n      `(min-width: ${theme.breakpoints.values.lg + 1}px) and (max-width: ${\r\n        theme.breakpoints.values.xl\r\n      }px)`\r\n    ),\r\n    isXl: useMediaQuery(`(min-width: ${theme.breakpoints.values.xl + 1}px)`),\r\n    active: \"xs\",\r\n  };\r\n  if (breakpoints.isXs) breakpoints.active = \"xs\";\r\n  if (breakpoints.isSm) breakpoints.active = \"sm\";\r\n  if (breakpoints.isPhone) breakpoints.active = \"phone\";\r\n  if (breakpoints.isMd) breakpoints.active = \"md\";\r\n  if (breakpoints.isLg) breakpoints.active = \"lg\";\r\n  if (breakpoints.isXl) breakpoints.active = \"xl\";\r\n  return breakpoints;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport clsx from \"clsx\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\n// material_ui\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport {\r\n  CssBaseline,\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Drawer as MUIDrawer,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  IconButton,\r\n  Alert,\r\n  Snackbar,\r\n} from \"@mui/material/\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\r\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport HomeIcon from \"@mui/icons-material/Home\"; // Main\r\nimport ExitToAppIcon from \"@mui/icons-material/ExitToApp\"; // Login, Logout\r\nimport PeopleIcon from \"@mui/icons-material/People\"; // Team Data\r\nimport DeveloperBoardIcon from \"@mui/icons-material/DeveloperBoard\"; //boardList\r\nimport ShoppingCartIcon from \"@mui/icons-material/ShoppingCart\"; //租借開發版\r\nimport FactCheckIcon from \"@mui/icons-material/FactCheck\";\r\nimport { Redirect } from \"react-router\";\r\nimport { selectSession, logout } from \"../../slices/sessionSlice\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n// route\r\n\r\nconst drawerWidth = 200;\r\nconst maxPhoneWidth = 700;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: \"nowrap\",\r\n    position: \"relative\",\r\n    zIndex: theme.zIndex.drawer - 1000,\r\n  },\r\n  root: {\r\n    //  display: \"flex\",\r\n  },\r\n  appBar: {\r\n    paddingTop: theme.spacing(1),\r\n    color: \"#fff\",\r\n    boxShadow: \"none\",\r\n    // backgroundColor: \"rgb(25,34,49,.7)\",\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    [theme.breakpoints.up(\"phone\")]: {\r\n      marginLeft: drawerWidth,\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      transition: theme.transitions.create([\"width\", \"margin\"], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n    },\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  appBarTypography: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerOpen: {\r\n    [theme.breakpoints.up(\"phone\")]: {\r\n      width: drawerWidth,\r\n      transition: theme.transitions.create(\"width\", {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n    },\r\n  },\r\n  drawerClose: {\r\n    overflowX: \"hidden\",\r\n    overflowY: \"hidden\",\r\n    width: theme.spacing(0),\r\n    [theme.breakpoints.up(\"phone\")]: {\r\n      width: theme.spacing(0) + 1,\r\n      transition: theme.transitions.create(\"width\", {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: 10,\r\n  },\r\n  iconButton: {\r\n    marginRight: 0,\r\n  },\r\n  toolbar: {\r\n    marginTop: theme.spacing(1),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: theme.spacing(0, 0),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n    [theme.breakpoints.up(\"phone\")]: {\r\n      transition: theme.transitions.create(\"margin\", {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n    },\r\n    marginLeft: 0,\r\n  },\r\n  contentShift: {\r\n    [theme.breakpoints.up(\"phone\")]: {\r\n      transition: theme.transitions.create(\"margin\", {\r\n        easing: theme.transitions.easing.easeOut,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  offset: theme.mixins.toolbar,\r\n}));\r\n\r\nconst Drawer = ({ children }) => {\r\n  const { isLogin, authority, userID } = useSelector(selectSession);\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const { alert, setAlert } = useMakeNTU();\r\n  const handleDrawerOpen = () => {\r\n    setOpen(() => !open);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const itemList = !isLogin\r\n    ? [\r\n        { text: \"Main\", to: \"/\", icon: <HomeIcon /> },\r\n        { text: \"Login\", to: \"/login\", icon: <ExitToAppIcon /> },\r\n      ]\r\n    : {\r\n        1: [\r\n          //admin區\r\n          { text: \"Home\", to: \"/\", icon: <HomeIcon /> },\r\n          {\r\n            text: \"Team Data\",\r\n            to: \"/teamdata\",\r\n            icon: <PeopleIcon />,\r\n          },\r\n          {\r\n            text: \"Items List\",\r\n            to: \"/boardlist\",\r\n            icon: <DeveloperBoardIcon />,\r\n          },\r\n          {\r\n            text: \"Request Status\",\r\n            to: \"/requestStatus\",\r\n            icon: <FactCheckIcon />,\r\n          },\r\n        ],\r\n        0: [\r\n          //user區\r\n          { text: \"Home\", to: \"/\", icon: <HomeIcon /> },\r\n          {\r\n            text: \"Borrow Items\",\r\n            to: \"/user\",\r\n            icon: <DeveloperBoardIcon />,\r\n          },\r\n          {\r\n            text: \"Your Status\",\r\n            to: \"/user/status\",\r\n            icon: <FactCheckIcon />,\r\n          },\r\n        ],\r\n      }[authority] || [{ text: \"Home\", to: \"/\", icon: <HomeIcon /> }];\r\n\r\n  const userName = isLogin ? userID : \"\";\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar\r\n        className={clsx(classes.appBar, {\r\n          [classes.appBarShift]: open,\r\n        })}\r\n        position=\"fixed\"\r\n        sx={{ backgroundColor: \"rgb(15,15,15)\" }}\r\n      >\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}\r\n            edge=\"start\"\r\n            className={clsx(classes.menuButton, {\r\n              [classes.hide]: open,\r\n            })}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          {/* <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"close drawer\"\r\n            onClick={handleDrawerClose}\r\n            edge=\"start\"\r\n            className={clsx(classes.menuButton, {\r\n              [classes.hide]: !open || window.innerWidth >= maxPhoneWidth,\r\n            })}\r\n          >\r\n            <KeyboardArrowUpIcon />\r\n          </IconButton> */}\r\n          <Typography variant=\"h5\" className={classes.appBarTypography}>\r\n            <div\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={() => history.push(\"/\")}\r\n              aria-hidden=\"true\"\r\n            >\r\n              MakeNTU\r\n            </div>\r\n          </Typography>\r\n          <Typography\r\n            variant=\"h6\"\r\n            className={clsx({\r\n              [classes.hide]: isLogin,\r\n            })}\r\n          >\r\n            <div\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={() => history.push(\"/login\")}\r\n              aria-hidden=\"true\"\r\n            >\r\n              LOGIN\r\n            </div>\r\n          </Typography>\r\n          <Typography variant=\"h6\">{userName}</Typography>\r\n          <IconButton\r\n            className={clsx(classes.iconButton, {\r\n              [classes.hide]: !isLogin,\r\n            })}\r\n            onClick={() => dispatch(logout())}\r\n          >\r\n            <ExitToAppIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <MUIDrawer\r\n        anchor={window.innerWidth >= maxPhoneWidth ? \"left\" : \"top\"}\r\n        variant=\"permanent\"\r\n        className={clsx(classes.drawer, {\r\n          [classes.drawerOpen]: open,\r\n          [classes.drawerClose]: !open,\r\n        })}\r\n        classes={{\r\n          paper: clsx({\r\n            [classes.drawerOpen]: open,\r\n            [classes.drawerClose]: !open,\r\n          }),\r\n        }}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          {/* <IconButton onClick={handleDrawerClose}>\r\n            {theme.direction === \"rtl\" ? (\r\n              <KeyboardArrowUpIcon />\r\n            ) : (\r\n              <ChevronLeftIcon />\r\n            )}\r\n          </IconButton> */}\r\n        </div>\r\n\r\n        <List>\r\n          {itemList.map(({ text, to, icon }) => {\r\n            return (\r\n              <ListItem\r\n                button\r\n                key={text}\r\n                component={Link}\r\n                to={to}\r\n                onClick={handleDrawerClose}\r\n              >\r\n                <ListItemIcon>{icon}</ListItemIcon>\r\n                <ListItemText primary={text} />\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n      </MUIDrawer>\r\n      <div className={classes.offset} />\r\n      <div\r\n        className={clsx(classes.content, {\r\n          [classes.contentShift]: open,\r\n        })}\r\n      >\r\n        {children}\r\n      </div>\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={alert?.open}\r\n        autoHideDuration={alert?.duration ?? 1000}\r\n        onClose={() => setAlert({ ...alert, open: false })}\r\n      >\r\n        <Alert variant=\"filled\" severity={alert?.severity}>\r\n          {alert?.msg}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nDrawer.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Drawer;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Element } from \"react-scroll\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Button, Grid, Typography } from \"@mui/material/\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n/**\r\n * This is Main Page\r\n */\r\nexport default function Top(props) {\r\n  const history = useHistory();\r\n  const { userID, authority } = props;\r\n  const useStyles = makeStyles(() => ({\r\n    root: {\r\n      flexGrow: 1,\r\n      width: \"100%\",\r\n      height: `calc(80vh - 64px)`,\r\n      overflow: \"auto\",\r\n    },\r\n    paper: {\r\n      // background: \"rgb(0,0,0,.0)\",\r\n      boxShadow: \"none\",\r\n    },\r\n    text: {\r\n      margin: \"auto\",\r\n      textAlign: \"start\",\r\n      width: \"80%\",\r\n    },\r\n    time: {\r\n      margin: \"auto\",\r\n      color: \"#F5DE83\",\r\n      textAlign: \"end\",\r\n      width: \"70%\",\r\n      fontWeight: \"400\",\r\n    },\r\n  }));\r\n\r\n  const classes = useStyles();\r\n  const { isLogin } = useSelector(selectSession);\r\n  return (\r\n    <Element name=\"title\">\r\n      <div className={classes.root}>\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          style={{\r\n            // boxShadow: \"0 0 15px #f3d42e inset\",\r\n            padding: \"10px\",\r\n            margin: \"auto\",\r\n            marginTop: \"5%\",\r\n            // marginLeft: \"30%\",\r\n            width: \"90%\",\r\n            maxWidth: \"1000px\",\r\n            maxHeight: \"500px\",\r\n          }}\r\n        >\r\n          {/* <Paper className={classes.paper}> */}\r\n          <Grid item style={{ marginTop: \"min(12.5%,20px)\", marginLeft: \"5%\" }}>\r\n            <Typography\r\n              gutterBottom\r\n              variant=\"h5\"\r\n              className={classes.text}\r\n              style={{ opacity: \".5\", textDecoration: \"none\" }}\r\n            >\r\n              MakeNTU\r\n            </Typography>\r\n            <Typography\r\n              variant=\"h4\"\r\n              className={classes.text}\r\n              style={{ marginBottom: \"18px\" }}\r\n            >\r\n              Competition Web\r\n            </Typography>\r\n            {isLogin && (\r\n              <Typography\r\n                variant=\"h4\"\r\n                className={classes.text}\r\n                style={{ marginBottom: \"18px\" }}\r\n              >\r\n                {authority === 0\r\n                  ? `Welcome Back Group#${userID}`\r\n                  : `Welcome Back Administrator!`}\r\n              </Typography>\r\n            )}\r\n          </Grid>\r\n          {!isLogin && (\r\n            <Button\r\n              style={{\r\n                width: \"90%\",\r\n                maxWidth: \"1000px\",\r\n                display: \"flex\",\r\n                margin: \"auto\",\r\n                marginTop: \"5%\",\r\n                marginBottom: \"3%\",\r\n                fontSize: \"4vmin\",\r\n              }}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => history.push(\"/login\")}\r\n            >\r\n              <Link\r\n                style={{ textDecoration: \"none\", color: \"white\" }}\r\n                to=\"/login\"\r\n              >\r\n                Log in\r\n              </Link>\r\n            </Button>\r\n          )}\r\n          {/* <Button\r\n              style={{\r\n                width: \"70%\",\r\n                display: \"flex\",\r\n                margin: \"auto\",\r\n              }}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              <Link\r\n                style={{ textDecoration: \"none\", color: \"white\" }}\r\n                to=\"/courses\"\r\n              >\r\n                Start to Select Courses\r\n              </Link>\r\n            </Button> */}\r\n          {/* </Paper> */}\r\n        </Grid>\r\n      </div>\r\n    </Element>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst FooterContainer = styled.div`\r\n  width: 100%;\r\n  height: 5vh;\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst Text = styled.h1`\r\n  font-size: 25px;\r\n  font-weight: 500;\r\n  line-height: 1.4;\r\n  color: #fff;\r\n  margin: 0;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Members = styled.div`\r\n  width: 80%;\r\n  display: flex;\r\n  height: 150px;\r\n  /* overflow:auto; */\r\n  flex-direction: column;\r\n  font-size: 12px;\r\n  letter-spacing: 2px;\r\n  border-top: 2px solid #cdcdcd;\r\n  padding-right: 10px;\r\n  padding-left: 10px;\r\n\r\n  color: #fff;\r\n  align-items: center;\r\n  /* justify-content: space-between; */\r\n  @media screen and (max-width: 480px) {\r\n    color: #fff;\r\n    width: 90%;\r\n    height: 130px;\r\n    display: flex;\r\n    // overflow: auto;\r\n    font-size: 11px;\r\n    letter-spacing: 1.5px;\r\n    line-height: 1.5;\r\n    flex-direction: column;\r\n    // justify-content: space-between;\r\n    /* align-items:center; */\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n  }\r\n`;\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <FooterContainer>\r\n      <Text>Developers</Text>\r\n      <Members>\r\n        <p> 陳冠豪、楊竣凱、葉庭羽</p>\r\n      </Members>\r\n    </FooterContainer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Top from \"./TopSection\";\r\nimport Footer from \"./Footer.js\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\nexport default function Main() {\r\n  const { subscribe } = useMakeNTU();\r\n  const { userID, authority } = useSelector(selectSession);\r\n  subscribe({ id: userID, authority: authority, page: \"main\" });\r\n\r\n  return (\r\n    <div>\r\n      <Top userID={userID} authority={authority} />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  Box,\r\n  Typography,\r\n  Container,\r\n  InputAdornment,\r\n  IconButton,\r\n  OutlinedInput,\r\n} from \"@mui/material/\";\r\nimport LockTwoTone from \"@mui/icons-material/LockTwoTone\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport Visibility from \"@mui/icons-material/Visibility\";\r\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\";\r\n\r\n// api\r\nimport { SessionAPI } from \"../../api\";\r\nimport { setLogin } from \"../../slices/sessionSlice\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      NTUEE {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(5),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    borderRadius: \"5%\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    marginTop: theme.spacing(8),\r\n    backgroundColor: theme.palette.secondary.main,\r\n    height: \"70px\",\r\n    width: \"70px\",\r\n  },\r\n  form: {\r\n    width: \"80%\",\r\n    marginTop: theme.spacing(5),\r\n    marginBottom: theme.spacing(8),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(5, 0, 2),\r\n  },\r\n  accountmargin: {\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function Login() {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [values, setValues] = React.useState({\r\n    account: \"\",\r\n    password: \"\",\r\n    showPassword: false,\r\n    error: false,\r\n  });\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    setValues({ ...values, [prop]: event.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      // /^(b|r|d)\\d{8}$/i.test(values.account) &&\r\n      !/^$/i.test(values.password)\r\n    ) {\r\n      values.error = false;\r\n      try {\r\n        const response = await SessionAPI.postSession(\r\n          values.account,\r\n          values.password\r\n        );\r\n        dispatch(setLogin(response.data));\r\n      } catch (err) {\r\n        console.error(err);\r\n        values.error = true;\r\n      }\r\n    } else {\r\n      values.error = true;\r\n    }\r\n    setValues({ ...values, account: \"\", password: \"\", showPassword: \"\" });\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setValues({ ...values, showPassword: !values.showPassword });\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockTwoTone style={{ fontSize: 40 }} />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            <div>Sign in</div>\r\n          </Typography>\r\n          <form className={classes.form} noValidate onSubmit={handleSubmit}>\r\n            <OutlinedInput\r\n              error={values.error}\r\n              margin=\"dense\"\r\n              required\r\n              fullWidth\r\n              id=\"StudentId\"\r\n              placeholder=\"Student ID\"\r\n              value={values.account}\r\n              name=\"StudentId\"\r\n              className={classes.accountmargin}\r\n              autoComplete=\"StudentId\"\r\n              onChange={handleChange(\"account\")}\r\n              autoFocus\r\n            />\r\n            <OutlinedInput\r\n              error={values.error}\r\n              margin=\"dense\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              value={values.password}\r\n              id=\"password\"\r\n              type={values.showPassword ? \"text\" : \"password\"}\r\n              autoComplete=\"current-password\"\r\n              onChange={handleChange(\"password\")}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                    edge=\"end\"\r\n                  >\r\n                    {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n            <div style={{ color: \"red\" }}>\r\n              {values.error ? \"Incorrect account or password\" : null}\r\n            </div>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n              sx={{ my: \"10px\" }}\r\n            >\r\n              <div>Sign in</div>\r\n            </Button>\r\n            <Box>\r\n              <Copyright />\r\n            </Box>\r\n          </form>\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport InputBase from \"@mui/material/InputBase\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport Radio from \"@mui/material/Radio\";\r\nimport RadioGroup from \"@mui/material/RadioGroup\";\r\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport { useMakeNTU } from \"../../../hooks/useMakeNTU\";\r\n\r\nfunction SearchBar({ visibility, handleCheck, handleChange, searchMethod }) {\r\n  const handleClick = (e) => {\r\n    handleCheck(e.target.value);\r\n  };\r\n  const { breakpoints } = useMakeNTU();\r\n  return (\r\n    <Paper\r\n      component=\"form\"\r\n      sx={{\r\n        p: \"2px 6px\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        width: \"68%\",\r\n        m: \"1px\",\r\n        borderRadius: \"10px\",\r\n        backgroundColor: \"rgba(255,255,255,0.1)\",\r\n        visibility: { visibility } || 1,\r\n      }}\r\n    >\r\n      <FormControl>\r\n        <RadioGroup\r\n          row\r\n          aria-labelledby=\"demo-controlled-radio-buttons-group\"\r\n          name=\"controlled-radio-buttons-group\"\r\n          value={searchMethod}\r\n          onChange={handleClick}\r\n        >\r\n          <FormControlLabel\r\n            value=\"Name\"\r\n            control={<Radio />}\r\n            label=\"by Name\"\r\n            sx={{\r\n              display: breakpoints.isSm || breakpoints.isXs ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n          <FormControlLabel\r\n            value=\"Tag\"\r\n            control={<Radio />}\r\n            label=\"by Tag\"\r\n            sx={{\r\n              display: breakpoints.isSm || breakpoints.isXs ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n        </RadioGroup>\r\n      </FormControl>\r\n\r\n      <InputBase\r\n        sx={{ ml: 1, flex: 1 }}\r\n        placeholder={\r\n          breakpoints.isSm || breakpoints.isXs ? \"Search by name\" : \"Search\"\r\n        }\r\n        onChange={(e) => {\r\n          //   // console.log(e.target.value);\r\n          handleChange(e.target.value);\r\n        }}\r\n        onKeyDown={(e) => {\r\n          if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n          }\r\n        }}\r\n        // inputProps={{ \"aria-label\": \"search google maps\" }}\r\n      />\r\n\r\n      <IconButton type=\"button\" sx={{ p: \"10px\" }} aria-label=\"search\">\r\n        <SearchIcon />\r\n      </IconButton>\r\n    </Paper>\r\n  );\r\n}\r\nSearchBar.propTypes = {\r\n  handleChange: PropTypes.func.isRequired,\r\n};\r\nexport default SearchBar;\r\n","import * as React from \"react\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport Select from \"@mui/material/Select\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function Selector(props) {\r\n  const [df, setDf] = React.useState(0);\r\n\r\n  useEffect(() => {\r\n    if (props.defaultValue !== 0) {\r\n      setDf(props.defaultValue);\r\n    }\r\n  }, [props.defaultValue]);\r\n\r\n  const handleChange = (event) => {\r\n    props.addNeedList(props.name, event.target.value);\r\n    setDf(event.target.value);\r\n  };\r\n\r\n  const makeArray = (limit) => {\r\n    //// console.log(limit);\r\n    let a = [];\r\n    for (let i = 0; i < limit + 1; i++) {\r\n      a.push(i);\r\n    }\r\n    return a;\r\n  };\r\n\r\n  const a = makeArray(props.limit);\r\n\r\n  return (\r\n    <FormControl sx={{ m: 1, minWidth: 120 }} size=\"small\">\r\n      <InputLabel id=\"demo-select-small\">Quantity</InputLabel>\r\n      <Select\r\n        labelId=\"demo-select-small\"\r\n        id=\"demo-select-small\"\r\n        key={`${props.id}`}\r\n        label=\"quantity\"\r\n        onChange={handleChange}\r\n        value={df}\r\n      >\r\n        {a.map((e) => {\r\n          return (\r\n            <MenuItem key={props.id + \"_\" + e} value={e}>\r\n              {e}\r\n            </MenuItem>\r\n          );\r\n        })}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\n\r\nimport Selector from \"./Selector\";\r\nimport { NearMeDisabled } from \"@mui/icons-material\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useMakeNTU } from \"../../../hooks/useMakeNTU\";\r\n\r\nconst Img = styled(\"img\")({\r\n  margin: \"auto\",\r\n  display: \"block\",\r\n  maxWidth: \"100%\",\r\n  maxHeight: \"auto\",\r\n});\r\n\r\nexport default function Card(props) {\r\n  // // console.log(props)\r\n  const [num, setNum] = React.useState(0);\r\n  const { breakpoints } = useMakeNTU();\r\n  //// console.log(props.addNeedList);\r\n  useEffect(() => {\r\n    if (props.needList[props.name]) {\r\n      // console.log(\"needList \" + num);\r\n      setNum(props.needList[props.name]);\r\n      if (props.needList[props.name] > props.left) {\r\n        props.addNeedList(props.name, props.left);\r\n      }\r\n    }\r\n  }, [props.needList]);\r\n\r\n  useEffect(() => {\r\n    // console.log(\"default is \" + num);\r\n  }, [num]);\r\n\r\n  return (\r\n    <Paper\r\n      sx={{\r\n        minWidth: 230,\r\n        maxHeight: breakpoints.isXs ? 800 : 180,\r\n        p: 2,\r\n        margin: \"5px\",\r\n        flexGrow: 3,\r\n        visibility: !props.v ? \"hidden\" : \"visible\",\r\n        backgroundColor: (theme) =>\r\n          theme.palette.mode === \"dark\" ? \"#1A2027\" : \"#fff\",\r\n      }}\r\n    >\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <ButtonBase sx={{ width: 128, height: 128 }}>\r\n            <Img\r\n              alt=\"img not found\"\r\n              src={props?.image || \"/photoData/MakeNTU2022_icon.png\"}\r\n            />\r\n            {/* 這裡是放照片的 */}\r\n          </ButtonBase>\r\n        </Grid>\r\n        <Grid item sx={{ minWidth: 150, minHeight: 160 }} sm container>\r\n          <Grid item xs container direction=\"column\" spacing={2}>\r\n            <Grid item xs>\r\n              <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\r\n                {props.name}\r\n              </Typography>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                {\"Tag: \" + props.tag}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                {\"ID: \" + props.id.slice(0, 8)}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Selector\r\n                id={props.id}\r\n                name={props.name}\r\n                defaultValue={num}\r\n                userID={props.userID}\r\n                limit={Math.min(props.limit, props.left)}\r\n                addNeedList={props.addNeedList}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography variant=\"subtitle1\" component=\"div\">\r\n              left:{props.left}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\n\r\nfunction ResetWindow(props) {\r\n  const { open, handleResetClose, handleResetAgree } = props;\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleResetClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">您確認要重置購物車嗎？</DialogTitle>\r\n\r\n      <DialogActions>\r\n        <Button onClick={handleResetClose}>否</Button>\r\n        <Button onClick={handleResetAgree} autoFocus>\r\n          是\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\nexport default ResetWindow;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Stepper from \"@mui/material/Stepper\";\r\nimport Step from \"@mui/material/Step\";\r\nimport StepLabel from \"@mui/material/StepLabel\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport List from \"@mui/material/List\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\n\r\nimport SearchBar from \"./Components/SearchBar\";\r\nimport Card from \"./Components/Cards\";\r\nimport ResetWindow from \"./Components/ResetWindow\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n\r\nconst steps = [\"挑選開發版\", \"確認並送出\", \"申請結果\"];\r\n\r\nvar needList = {};\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: calc(74vh - 80px);\r\n  margin: 5px 0 5px 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: start;\r\n  justify-content: center;\r\n  //overflow-y: hidden;\r\n`;\r\n\r\nfunction Body() {\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const [rerender, setRerender] = React.useState(false);\r\n  const [searchWord, setSearchWord] = React.useState(\"\");\r\n  const [searchMethod, setSearchMethod] = React.useState(\"Name\");\r\n  //const [needList, setNeedList] = React.useState({});\r\n  const [userCardData, setUserCardData] = React.useState([]);\r\n  const [ableNext, setAbleNext] = React.useState(false);\r\n  const [orders, setOrders] = React.useState([]);\r\n  const [resetOpen, setResetOpen] = React.useState(false);\r\n  const {\r\n    userBoardINIT,\r\n    sendData,\r\n    getUser,\r\n    cardData,\r\n    userRequest,\r\n    userCards,\r\n    userProgressStatus,\r\n    subscribe,\r\n  } = useMakeNTU();\r\n  const { userID, authority } = useSelector(selectSession);\r\n\r\n  useEffect(() => {\r\n    getUser(userID);\r\n    subscribe({ id: userID, authority: authority, page: \"userProgress\" });\r\n    needList = {};\r\n  }, []);\r\n  useEffect(() => {\r\n    setUserCardData(\r\n      cardData.map((e) => {\r\n        e.needList = needList;\r\n        return e;\r\n      })\r\n    );\r\n    setRerender(false);\r\n  }, [needList, cardData, rerender, userProgressStatus]);\r\n  useEffect(() => {\r\n    setOrders(order(userProgressStatus));\r\n  }, [userProgressStatus]);\r\n\r\n  useEffect(() => {\r\n    needList = {};\r\n  }, [userID]);\r\n\r\n  const addNeedList = (name, quantity) => {\r\n    if (quantity === 0) {\r\n      delete needList[name];\r\n    } else {\r\n      needList[name] = quantity;\r\n    }\r\n    //// console.log([...needList]);\r\n    setAbleNext(Object.keys(needList).length !== 0);\r\n  };\r\n\r\n  const handleNext = () => {\r\n    //// console.log(userRequest, userCards);\r\n    if (activeStep === steps.length - 1) {\r\n      reset();\r\n      return;\r\n    } else if (activeStep === steps.length - 2) {\r\n      let requestBody = [];\r\n      let group = userID;\r\n\r\n      // for (var [key, value] of needList.entries()) {\r\n      //   requestBody.push([key, value]);\r\n      // }\r\n      Object.keys(needList).forEach(function (key) {\r\n        requestBody.push([key, needList[key]]);\r\n      });\r\n      // // console.log({ group, requestBody });\r\n      sendData([\"REQUEST\", { group, requestBody }]);\r\n    }\r\n\r\n    // console.log(\"User \" + userID);\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setResetOpen(true);\r\n  };\r\n  const handleResetClose = () => {\r\n    // console.log(\"算了\");\r\n    setResetOpen(false);\r\n  };\r\n  const reset = () => {\r\n    // console.log(\"重置\");\r\n    needList = {};\r\n    setUserCardData([]);\r\n    setActiveStep(0);\r\n    setRerender(true);\r\n    setResetOpen(false);\r\n  };\r\n\r\n  const order = (servermsg) => {\r\n    let a = servermsg;\r\n    // for (var [key, value] of needList.entries()) {\r\n    //   a.push(\"板子 : \" + key + \"  申請\" + value + \"個\");\r\n    // }\r\n    if (a.length === 2) {\r\n      a = [\"Warning!!!!!  Something wrong!!!!!\", ...a];\r\n    }\r\n\r\n    if (a.length === 1) {\r\n      Object.keys(needList).forEach(function (key) {\r\n        a.push(key + \"  申請\" + needList[key] + \"個\");\r\n      });\r\n      a.push(\"-----銘謝惠顧-----\");\r\n    }\r\n    //// console.log(a);\r\n\r\n    return a;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setRerender(false);\r\n  }, [rerender]);\r\n\r\n  useEffect(() => {\r\n    let payload = 0;\r\n    userBoardINIT(payload);\r\n  }, [rerender]);\r\n\r\n  const calcuLimit = (limit, boardName) => {\r\n    let groupLimit = limit;\r\n\r\n    if (userCards[boardName]) {\r\n      groupLimit -= userCards[boardName];\r\n    }\r\n\r\n    userRequest.map((rq) => {\r\n      if (rq.status === \"pending\") {\r\n        //// console.log(boardName);\r\n        rq.requestBody.map((rb) => {\r\n          if (rb.board === boardName) {\r\n            groupLimit -= rb.quantity;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    //// console.log(groupLimit);\r\n    return groupLimit;\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <Box mb={2}>\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label) => {\r\n            return (\r\n              <Step key={label}>\r\n                <StepLabel>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n      </Box>\r\n      {activeStep === steps.length - 1 ? (\r\n        <Wrapper>\r\n          <Box sx={{ flexGrow: 1, maxWidth: 752 }}>\r\n            <Grid item xs={12} md={6}>\r\n              <Typography sx={{ mt: 4, mb: 2 }} variant=\"h6\" component=\"div\">\r\n                All steps completed (you&apos;re finished)\r\n                <br></br>\r\n                This is your order list:\r\n              </Typography>\r\n              <List dense={false}>\r\n                {orders.map((e) => {\r\n                  return (\r\n                    <ListItem key={e}>\r\n                      <ListItemText\r\n                        primary={e}\r\n                        sx={\r\n                          e.slice(0, 4).toLowerCase() === \"warn\"\r\n                            ? {\r\n                                color: \"#FF1212\",\r\n                              }\r\n                            : {}\r\n                        }\r\n                      />\r\n                    </ListItem>\r\n                  );\r\n                })}\r\n              </List>\r\n            </Grid>\r\n          </Box>\r\n        </Wrapper>\r\n      ) : (\r\n        <Wrapper>\r\n          <Box\r\n            sx={{\r\n              width: \"80%\",\r\n              height: \"100%\",\r\n              backgroundColor: \"rgba(255,255,255,0.6)\",\r\n              overflowY: \"scroll\",\r\n              borderRadius: \"5px\",\r\n              display: \"flex\",\r\n              flexWrap: \"wrap\",\r\n              justifyContent: \"space-around\",\r\n              alignContent: \"start\",\r\n            }}\r\n          >\r\n            {userCardData.length !== 0 ? (\r\n              userCardData.map((e) => {\r\n                if (activeStep === steps.length - 2) {\r\n                  if (needList[e.name]) {\r\n                    return (\r\n                      <Card\r\n                        key={`${e.name} + ${e.id} +${userID}`}\r\n                        name={e.name}\r\n                        tag={e.category}\r\n                        left={e.remain}\r\n                        image={e.image}\r\n                        limit={calcuLimit(e.limit, e.name)}\r\n                        v={true}\r\n                        id={e.id}\r\n                        userID={userID}\r\n                        needList={e.needList}\r\n                        addNeedList={addNeedList}\r\n                      />\r\n                    );\r\n                  }\r\n                } else {\r\n                  //這裡要filter\r\n\r\n                  if (\r\n                    (searchMethod === \"Name\" &&\r\n                      e.name.toLowerCase().indexOf(searchWord.toLowerCase()) !==\r\n                        -1) ||\r\n                    (searchMethod === \"Tag\" &&\r\n                      e.category\r\n                        .toLowerCase()\r\n                        .indexOf(searchWord.toLowerCase()) !== -1)\r\n                  ) {\r\n                    return (\r\n                      <Card\r\n                        key={e.name + e.id}\r\n                        name={e.name}\r\n                        tag={e.category}\r\n                        left={e.remain}\r\n                        image={e.image}\r\n                        limit={calcuLimit(e.limit, e.name)}\r\n                        v={true}\r\n                        id={e.id}\r\n                        needList={e.needList}\r\n                        addNeedList={addNeedList}\r\n                        rerender={rerender}\r\n                      />\r\n                    );\r\n                  }\r\n                }\r\n              })\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </Box>\r\n        </Wrapper>\r\n      )}\r\n\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          pt: 2,\r\n          justifyContent: \"space-evenly\",\r\n        }}\r\n      >\r\n        <Box sx={{ maxWidth: \"20%\" }}>\r\n          <Button\r\n            disabled={activeStep === 0 || activeStep === steps.length - 1}\r\n            onClick={handleBack}\r\n            sx={{ m: \"1px\" }}\r\n            variant={\"contained\"}\r\n          >\r\n            Back\r\n          </Button>\r\n        </Box>\r\n\r\n        {activeStep === 0 ? (\r\n          <SearchBar\r\n            handleCheck={setSearchMethod}\r\n            handleChange={setSearchWord}\r\n            searchMethod={searchMethod}\r\n          />\r\n        ) : (\r\n          <SearchBar\r\n            visibility={\"hidden\"}\r\n            handleCheck={setSearchMethod}\r\n            handleChange={setSearchWord}\r\n            searchMethod={searchMethod}\r\n          />\r\n        )}\r\n\r\n        <Box sx={{ maxWidth: \"25%\" }}>\r\n          {activeStep !== steps.length - 1 ? (\r\n            <Button\r\n              onClick={handleReset}\r\n              variant={\"contained\"}\r\n              sx={{ m: \"2px\" }}\r\n            >\r\n              Reset\r\n            </Button>\r\n          ) : null}\r\n\r\n          <Button\r\n            onClick={handleNext}\r\n            disabled={!ableNext}\r\n            variant={\"contained\"}\r\n            sx={{ m: \"2px\" }}\r\n          >\r\n            {activeStep === steps.length - 2\r\n              ? \"Confirm\"\r\n              : activeStep === steps.length - 1\r\n              ? \"Finish\"\r\n              : \"Next\"}\r\n          </Button>\r\n          <ResetWindow\r\n            open={resetOpen}\r\n            handleResetClose={handleResetClose}\r\n            handleResetAgree={reset}\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Body;\r\n","import Body from \"./Body\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Body />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import * as React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\n\r\nfunction AlertWindow(props) {\r\n  const { open, handleAlertClose, handleAlertAgree } = props;\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleAlertClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">您確認要取消申請嗎?</DialogTitle>\r\n\r\n      <DialogActions>\r\n        <Button onClick={handleAlertClose} variant=\"contained\">\r\n          No\r\n        </Button>\r\n        <Button onClick={handleAlertAgree} autoFocus variant=\"contained\">\r\n          Yes\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\nexport default AlertWindow;\r\n","import * as React from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Collapse from \"@mui/material/Collapse\";\r\nimport Box from \"@mui/material/Box\";\r\nimport AlertWindow from \"./AlertWindow\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n\r\nconst rowContent = (props) => {\r\n  const { row, open, userID, state } = props;\r\n  const [alertOpen, setAlertOpen] = React.useState(false);\r\n  const { cancelRequest, breakpoints } = useMakeNTU();\r\n  const handleClick = () => {\r\n    setAlertOpen(true);\r\n  };\r\n  const handleAlertClose = () => {\r\n    setAlertOpen(false);\r\n  };\r\n  const handleAlertAgree = () => {\r\n    cancelRequest([userID, row._id]);\r\n    setAlertOpen(false);\r\n  };\r\n\r\n  return (\r\n    <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <Box sx={{ maxHeight: \"30vh\", overflowY: \"auto\", overflowX: \"hidden\" }}>\r\n          <Table size=\"small\" sx={{ m: 1 }}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Stuff</TableCell>\r\n                <TableCell>Amount</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {\r\n                //breakpoints.is\r\n              }\r\n\r\n              {state\r\n                ? row.map((detailRow) => {\r\n                    // console.log(detailRow);\r\n                    return (\r\n                      <TableRow key={detailRow.id.slice(0, 8)}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {detailRow.name}\r\n                        </TableCell>\r\n                        <TableCell>{detailRow.num}</TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })\r\n                : row.requestBody.map((detailRow) => (\r\n                    <TableRow key={detailRow._id}>\r\n                      <TableCell component=\"th\" scope=\"row\">\r\n                        {detailRow.board}\r\n                      </TableCell>\r\n                      <TableCell>{detailRow.quantity}</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n            </TableBody>\r\n          </Table>\r\n        </Box>\r\n        <Box sx={{ margin: 1, display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n          {state ? (\r\n            <></>\r\n          ) : row.status === \"pending\" ? (\r\n            <Chip label=\"Cancel\" variant=\"outlined\" onClick={handleClick} />\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </Box>\r\n      </Collapse>\r\n      <AlertWindow\r\n        open={alertOpen}\r\n        handleAlertClose={handleAlertClose}\r\n        handleAlertAgree={handleAlertAgree}\r\n      />\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport default rowContent;\r\n","import * as React from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport RowContent from \"./UserRowContent\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport { List, ListItem } from \"@mui/material\";\r\nfunction Row(props) {\r\n  const { row, userID, state } = props;\r\n  const [open, setOpen] = useState(false);\r\n  const [timer, setTimer] = useState(0);\r\n  const { deleteRequestFromUser, getUser, render, breakpoints } = useMakeNTU();\r\n  let intervalId = useRef();\r\n  //timer\r\n  useEffect(() => {\r\n    if (render) return;\r\n    if (state) return;\r\n\r\n    var d = new Date().getTime(); //number\r\n    var pretime = parseInt(\r\n      15 * 60 - Math.floor((d - row.sendingTime) / 1000),\r\n      10\r\n    );\r\n    setTimer(pretime);\r\n    if (row.status === \"pending\" || row.status === \"ready\") {\r\n      intervalId.current = setInterval(() => {\r\n        setTimer((t) => t - 1);\r\n      }, 1000);\r\n      // console.log(\"break!\");\r\n      return () => clearInterval(intervalId.current);\r\n    } else {\r\n      setTimer(0);\r\n    }\r\n  }, [render]);\r\n\r\n  useEffect(() => {\r\n    if (timer < 0) {\r\n      clearInterval(intervalId.current);\r\n      getUser(userID);\r\n    }\r\n  }, [timer]);\r\n\r\n  const showTime = () => {\r\n    if (\r\n      row.status === \"denied\" ||\r\n      row.status === \"cancel\" ||\r\n      row.status === \"expired\" ||\r\n      timer <= 0 ||\r\n      state\r\n    ) {\r\n      return \"00 : 00\";\r\n    }\r\n    var min = (timer % 60) / 10 < 1 ? \"0\" + (timer % 60) : timer % 60;\r\n    return parseInt(timer / 60) + \" : \" + min;\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <TableRow sx={{ \"& > *\": { borderBottom: \"unset\" }, maxHeight: \"10vh\" }}>\r\n        {state ? (\r\n          <TableCell\r\n            align=\"left\"\r\n            sx={{ p: \"6px\", border: 0, minWidth: \"4em\", color: \"#00FF00\" }}\r\n          >\r\n            已領取\r\n          </TableCell>\r\n        ) : row.status === \"pending\" ? (\r\n          <TableCell align=\"left\" sx={{ p: \"6px\", border: 0, minWidth: \"4em\" }}>\r\n            申請中\r\n          </TableCell>\r\n        ) : row.status === \"ready\" ? (\r\n          <TableCell align=\"left\" sx={{ border: 0, minWidth: \"4em\", p: \"6px\" }}>\r\n            請來拿\r\n          </TableCell>\r\n        ) : (\r\n          <TableCell\r\n            align=\"left\"\r\n            sx={{\r\n              color: \"#FF1212\",\r\n              border: 0,\r\n              minWidth: \"5em\",\r\n              p: \"6px\",\r\n            }}\r\n          >\r\n            {row.status === \"denied\" ? (\r\n              \"已拒絕\"\r\n            ) : row.status === \"cancel\" ? (\r\n              \"已取消\"\r\n            ) : breakpoints.isPhone ||\r\n              breakpoints.isXs ||\r\n              breakpoints.isSm ||\r\n              breakpoints.isMd ? (\r\n              \"已超時...\"\r\n            ) : (\r\n              <List sx={{ p: \"0px\" }}>\r\n                <ListItem key=\"已超時\" sx={{ p: \"2px\", pl: \"0px\" }}>\r\n                  已超時\r\n                </ListItem>\r\n                <ListItem key=\"請重新申請\" sx={{ p: \"2px\", pl: \"0px\" }}>\r\n                  請重新申請\r\n                </ListItem>\r\n              </List>\r\n            )}\r\n          </TableCell>\r\n        )}\r\n\r\n        <TableCell align=\"center\" sx={{ py: \"6px\", px: \"0px\", border: 0 }}>\r\n          {showTime()}\r\n        </TableCell>\r\n\r\n        <TableCell align=\"right\" sx={{ display: \"flex\", border: 0, p: \"6px\" }}>\r\n          {!state && row.status !== \"pending\" && row.status !== \"ready\" ? (\r\n            <IconButton\r\n              aria-label=\"expand row\"\r\n              size=\"small\"\r\n              onClick={() => deleteRequestFromUser([userID, row._id])}\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <IconButton\r\n            aria-label=\"expand row\"\r\n            size=\"small\"\r\n            onClick={() => setOpen(!open)}\r\n          >\r\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\r\n          </IconButton>\r\n        </TableCell>\r\n      </TableRow>\r\n      <TableRow>\r\n        <RowContent row={row} open={open} userID={userID} state={state} />\r\n      </TableRow>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Row;\r\n","import * as React from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Selector from \"../userProgress/Components/Selector\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n\r\nconst Img = styled(\"img\")({\r\n  margin: \"auto\",\r\n  display: \"block\",\r\n  maxWidth: \"100%\",\r\n  maxHeight: \"auto\",\r\n});\r\n\r\nexport default function Card(props) {\r\n  //const [num, setNum] = React.useState(0);\r\n  const { num, userBoard } = props;\r\n  const { breakpoints } = useMakeNTU();\r\n  //// console.log(props.addNeedList);\r\n  /*useEffect(() => {\r\n    if (props.needList.has(props.id)) {\r\n      setNum(props.needList.get(props.id));\r\n    }\r\n  }, []);\r\n*/\r\n  return (\r\n    <Paper\r\n      sx={{\r\n        p: 2,\r\n        margin: \"5px\",\r\n        flexGrow: 3,\r\n        visibility: \"visible\", //!props.v ? \"hidden\" : \"visible\",\r\n        backgroundColor: (theme) =>\r\n          theme.palette.mode === \"dark\" ? \"#1A2027\" : \"#fff\",\r\n      }}\r\n    >\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <ButtonBase\r\n            sx={\r\n              breakpoints.isPhone\r\n                ? { width: 90, height: 90 }\r\n                : { width: 128, height: 128 }\r\n            }\r\n          >\r\n            <Img\r\n              alt=\"image not found\"\r\n              src={userBoard?.image || \"/photoData/MakeNTU2022_icon.png\"}\r\n            />\r\n            {/* 這裡是放照片的 */}\r\n          </ButtonBase>\r\n        </Grid>\r\n        <Grid item sx={{ minWidth: 150, minHeight: 160 }} sm container>\r\n          <Grid item xs container direction=\"column\" spacing={2}>\r\n            <Grid item xs>\r\n              <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\r\n                {userBoard.name}\r\n              </Typography>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                Tag: {userBoard.category}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                ID: {userBoard.id.slice(0, 8)}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <TextField\r\n                disabled\r\n                id=\"outlined-disabled\"\r\n                label=\"Amount\"\r\n                size=\"small\"\r\n                value={num}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Box from \"@mui/material/Box\";\r\nimport styled from \"styled-components\";\r\nimport Row from \"./UserRow\";\r\nimport Card from \"./Cards\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 80vh;\r\n  margin: 5px 0 5px 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: start;\r\n  justify-content: center;\r\n  //min-width: 380px;\r\n  // overflow-y: hidden;\r\n`;\r\nfunction Body() {\r\n  const {\r\n    userRequest,\r\n    getUser,\r\n    userCards,\r\n    subscribe,\r\n    getBoardData,\r\n    render,\r\n    setRender,\r\n    breakpoints,\r\n  } = useMakeNTU();\r\n  const { userID, authority } = useSelector(selectSession);\r\n  const [userBoard, setUserBoard] = useState([]);\r\n  const [myRequest, setMyRequest] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getUser(userID);\r\n    subscribe({ id: userID, authority: authority, page: \"userStatus\" });\r\n  }, []);\r\n  useEffect(() => {\r\n    if (!render) return;\r\n    setMyRequest(JSON.parse(JSON.stringify(userRequest)));\r\n    setUserBoard([]);\r\n    let ub = JSON.parse(JSON.stringify(getBoardData));\r\n    //// console.log(userCards);\r\n    ub = ub\r\n      .filter((ubb) => ubb.name in userCards)\r\n      .map((item) => {\r\n        item.num = userCards[item.name];\r\n        return item;\r\n      });\r\n    setUserBoard(ub);\r\n    setRender(false);\r\n  }, [render]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Box\r\n        sx={{\r\n          width: \"80%\",\r\n          height: \"100%\",\r\n          backgroundColor: \"rgba(255,255,255,0.6)\",\r\n          overflowY: \"hidden\",\r\n          borderRadius: \"5px\",\r\n          flexWrap: \"wrap\",\r\n          // justifyContent: \"space-around\",\r\n          justifyContent: \"flex-start\",\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            //margin: \"5px\",\r\n            width:\r\n              breakpoints.isXs || breakpoints.isSm\r\n                ? \"100%\"\r\n                : breakpoints.isPhone\r\n                ? \"47%\"\r\n                : \"35%\",\r\n            height: \"100%\",\r\n            backgroundColor: \"rgba(38,43,50)\",\r\n            overflowY: \"auto\",\r\n            overflowX: \"hidden\",\r\n            borderRadius: \"5px\",\r\n            display: \"flex\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"space-around\",\r\n          }}\r\n        >\r\n          <TableContainer\r\n            component={Paper}\r\n            sx={{\r\n              overflowX: \"hidden\",\r\n            }}\r\n          >\r\n            <Table aria-label=\"collapsible table\">\r\n              <TableHead>\r\n                <TableRow\r\n                  sx={{\r\n                    backgroundColor: \"rgba(255,255,255,0.2)\",\r\n                    alignItems: \"middle\",\r\n                    maxHeight: \"10vh\",\r\n                  }}\r\n                >\r\n                  {/* <TableCell /> */}\r\n                  <TableCell\r\n                    sx={{\r\n                      fontWeight: \"bold\",\r\n                      fontSize: \"h4.fontSize\",\r\n                    }}\r\n                    align=\"center\"\r\n                    colSpan={3}\r\n                  >\r\n                    My Requests\r\n                  </TableCell>\r\n\r\n                  {/* <TableCell /> */}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {breakpoints.isXs || breakpoints.isSm ? (\r\n                  <Row\r\n                    key={\"userBoard\" + userID}\r\n                    row={userBoard}\r\n                    userID={userID}\r\n                    state={true}\r\n                  />\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {myRequest.map((row) => (\r\n                  <Row key={row._id} row={row} userID={userID} state={false} />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </Box>\r\n        {\r\n          //for cards\r\n        }\r\n\r\n        <Box\r\n          sx={{\r\n            //margin: \"5px\",\r\n            width: breakpoints.isPhone ? \"53%\" : \"65%\",\r\n            height: \"100%\",\r\n            backgroundColor: \"rgba(255,255,255,0.6)\",\r\n            overflowY: \"auto\",\r\n            overflowX: \"hidden\",\r\n            borderRadius: \"5px\",\r\n            display: \"flex\", //breakpoints.isXs || breakpoints.isSm ? \"none\" : \"flex\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"space-around\",\r\n            alignContent: \"start\",\r\n          }}\r\n        >\r\n          {userBoard\r\n            ? userBoard.map((element) => {\r\n                return (\r\n                  <Card\r\n                    key={element.id + userID}\r\n                    num={element.num}\r\n                    userBoard={element}\r\n                  />\r\n                );\r\n              })\r\n            : \"\"}\r\n        </Box>\r\n      </Box>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Body;\r\n","import Body from \"./Body\";\r\nimport styled from \"styled-components\";\r\nimport Paper from \"@mui/material/Paper\";\r\n\r\nconst Wrapper = styled.div`\r\n  margin: auto;\r\n  width: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: start;\r\n`;\r\n\r\nconst StyledPaper = styled(Paper)`\r\n  padding: 2em;\r\n`;\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Body />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { lighten } from \"@mui/material/\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TablePagination,\r\n  TableHead,\r\n  TableSortLabel,\r\n  TableRow,\r\n  Toolbar,\r\n  Paper,\r\n  Checkbox,\r\n  Input,\r\n  Typography,\r\n  Tooltip,\r\n  IconButton,\r\n} from \"@mui/material/\";\r\nimport PropTypes from \"prop-types\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\n\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  { id: \"id\", numeric: false, disablePadding: true, label: \"id\" },\r\n  { id: \"name\", numeric: false, disablePadding: true, label: \"name\" },\r\n  {\r\n    id: \"authority\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"authority\",\r\n  },\r\n  { id: \"password\", numeric: false, disablePadding: true, label: \"password\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelectedInPage,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead className={classes.head}>\r\n      <TableRow>\r\n        <TableCell padding=\"none\" className={classes.headCell}>\r\n          <Checkbox\r\n            indeterminate={\r\n              numSelectedInPage > 0 && numSelectedInPage < rowCount\r\n            }\r\n            checked={rowCount > 0 && numSelectedInPage === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            className={classes.headCell}\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              className={classes.sortlabel}\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n        <TableCell className={classes.headCell} />\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.oneOfType([PropTypes.object]).isRequired,\r\n  numSelectedInPage: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"light\"\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const {\r\n    rootClasses,\r\n    numSelected,\r\n    search,\r\n    setSearch,\r\n    handleDelete,\r\n    setPage,\r\n    authority,\r\n  } = props;\r\n\r\n  const handleSearch = (e) => {\r\n    setSearch(e.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  return (\r\n    <Toolbar\r\n      className={\r\n        (clsx(classes.root, {\r\n          [classes.highlight]: numSelected > 0,\r\n        }),\r\n        rootClasses.toolbar)\r\n      }\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h6\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Teams\r\n        </Typography>\r\n      )}\r\n      <Input\r\n        value={search}\r\n        name=\"search bar\"\r\n        placeholder=\"id or name\"\r\n        onChange={(e) => {\r\n          handleSearch(e);\r\n        }}\r\n      />\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\" placement=\"bottom\">\r\n          <span>\r\n            <IconButton\r\n              aria-label=\"delete\"\r\n              onClick={() => handleDelete()}\r\n              disabled={authority !== 1}\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          </span>\r\n        </Tooltip>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  rootClasses: PropTypes.oneOfType([PropTypes.object]).isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  search: PropTypes.string.isRequired,\r\n  setSearch: PropTypes.func.isRequired,\r\n  handleDelete: PropTypes.func.isRequired,\r\n  setPage: PropTypes.func.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  container: {\r\n    maxHeight: 440,\r\n  },\r\n  toolbar: {\r\n    minHeight: \"50px\",\r\n  },\r\n  table: {\r\n    minWidth: 500,\r\n    padding: 0,\r\n  },\r\n  sortlabel: {\r\n    margin: 0,\r\n  },\r\n  headCell: {},\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  tablecell: {\r\n    padding: 0,\r\n  },\r\n  checkbox: {\r\n    padding: \"5px\",\r\n  },\r\n  icon: {\r\n    padding: 0,\r\n  },\r\n  copy: {\r\n    borderRadius: \"10px\",\r\n    backgroundColor: \"#424242\",\r\n    color: \"#ffffff\",\r\n    boxShadow: \"0px 0px 0px 0px rgba(0,0,0,0.3)\",\r\n  },\r\n}));\r\n\r\nexport default function TeamTable({\r\n  data,\r\n  handleEdit,\r\n  handleDelete,\r\n  selected,\r\n  setSelected,\r\n  showAlert,\r\n  authority,\r\n}) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(100);\r\n  const [search, setSearch] = React.useState(\"\");\r\n\r\n  //\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const teamFilter = (e) => {\r\n    return search\r\n      ? e.teamName.toUpperCase().startsWith(search.toUpperCase()) ||\r\n          e.id.toUpperCase().startsWith(search.toUpperCase())\r\n      : true;\r\n  };\r\n\r\n  //\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const nowSelecteds = data.filter((e) => teamFilter(e)).map((n) => n.id);\r\n      const newSelecteds = nowSelecteds.filter((id) => !selected.includes(id));\r\n      if (newSelecteds.length === 0) {\r\n        setSelected(selected.filter((id) => !nowSelecteds.includes(id)));\r\n      } else {\r\n        setSelected(selected.concat(newSelecteds));\r\n      }\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  //\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  // change page\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  // change rows per page\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // select\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar\r\n          rootClasses={classes}\r\n          numSelected={selected.length}\r\n          search={search}\r\n          setSearch={setSearch}\r\n          setPage={setPage}\r\n          handleDelete={() => {\r\n            handleDelete(selected);\r\n          }}\r\n          authority={authority}\r\n        />\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            stickyHeader\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelectedInPage={\r\n                data\r\n                  .filter((e) => teamFilter(e))\r\n                  .map((n) => n.id)\r\n                  .filter((id) => selected.includes(id)).length\r\n              }\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={data.filter((e) => teamFilter(e)).length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getComparator(order, orderBy))\r\n                .filter((e) => teamFilter(e))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((row, index) => {\r\n                  const isItemSelected = isSelected(row.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={row.id}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      {/* <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.numeric ? \"right\" : \"left\"}\r\n                        padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n                        sortDirection={orderBy === headCell.id ? order : false}\r\n                      /> */}\r\n                      <TableCell className={classes.tablecell}>\r\n                        <Checkbox\r\n                          onClick={(event) => handleClick(event, row.id)}\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                          className={classes.checkbox}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        key={headCells[0].id}\r\n                        align={headCells[0].numeric ? \"right\" : \"left\"}\r\n                        padding={\r\n                          headCells[0].disablePadding ? \"none\" : \"default\"\r\n                        }\r\n                        component=\"th\"\r\n                        id={row.id}\r\n                        scope=\"row\"\r\n                        className={classes.tablecell}\r\n                      >\r\n                        {row.id}\r\n                      </TableCell>\r\n                      <TableCell\r\n                        key={headCells[1].id}\r\n                        align={headCells[1].numeric ? \"right\" : \"left\"}\r\n                        padding={\r\n                          headCells[1].disablePadding ? \"none\" : \"default\"\r\n                        }\r\n                        className={classes.tablecell}\r\n                      >\r\n                        {row.teamName}\r\n                      </TableCell>\r\n                      <TableCell\r\n                        key={headCells[2].id}\r\n                        align={headCells[2].numeric ? \"right\" : \"left\"}\r\n                        padding={\r\n                          headCells[2].disablePadding ? \"none\" : \"default\"\r\n                        }\r\n                        className={classes.tablecell}\r\n                      >\r\n                        {row.authority}\r\n                      </TableCell>\r\n                      <TableCell\r\n                        key={headCells[3].id}\r\n                        align={headCells[3].numeric ? \"right\" : \"left\"}\r\n                        padding={\r\n                          headCells[3].disablePadding ? \"none\" : \"default\"\r\n                        }\r\n                        className={classes.tablecell}\r\n                      >\r\n                        {row.password ? (\r\n                          <CopyToClipboard text={row.password}>\r\n                            <button\r\n                              type=\"button\"\r\n                              className={classes.copy}\r\n                              onClick={() => {\r\n                                showAlert(\"info\", \"Copy password.\");\r\n                              }}\r\n                            >\r\n                              {row.password}\r\n                            </button>\r\n                          </CopyToClipboard>\r\n                        ) : (\r\n                          <></>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell className={classes.tablecell}>\r\n                        <IconButton\r\n                          onClick={() => handleEdit(row.id)}\r\n                          className={classes.icon}\r\n                          disabled={selected.length !== 0 || authority !== 1}\r\n                        >\r\n                          <EditIcon />\r\n                        </IconButton>\r\n                        <IconButton\r\n                          onClick={() => handleDelete([row.id])}\r\n                          className={classes.icon}\r\n                          disabled={selected.length !== 0 || authority !== 1}\r\n                        >\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[50, 100, 200, 400]}\r\n          component=\"div\"\r\n          count={data.filter((e) => teamFilter(e)).length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nTeamTable.propTypes = {\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      teamName: PropTypes.string.isRequired,\r\n      authority: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\r\n        .isRequired,\r\n      password: PropTypes.string,\r\n    })\r\n  ).isRequired,\r\n  handleEdit: PropTypes.func.isRequired,\r\n  handleDelete: PropTypes.func.isRequired,\r\n  selected: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n  setSelected: PropTypes.func.isRequired,\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport {\r\n  Alert,\r\n  Button,\r\n  Container,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Grid,\r\n  FormControl,\r\n  MenuItem,\r\n  InputLabel,\r\n  Select,\r\n  Typography,\r\n  Snackbar,\r\n} from \"@mui/material/\";\r\n\r\nimport Papa from \"papaparse\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\nimport TeamTable from \"./TeamTable\";\r\n\r\nimport { TeamDataAPI, PasswordAPI } from \"../../api\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n\r\nconst characters =\r\n  \"ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijklmnpqrstuvwxyz123456789\"; // no O, o, 0\r\nconst charactersLength = characters.length;\r\nconst passwordLength = 8;\r\n\r\nconst genPassword = () => {\r\n  let result = \"\";\r\n  for (let i = 0; i < passwordLength; i += 1) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nconst authorityData = [\"0\", \"1\"];\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    maxWidth: \"1000px\",\r\n    padding: \"0px\",\r\n    \"& > *\": {\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n  input: {\r\n    display: \"none\",\r\n  },\r\n}));\r\n\r\n/**\r\n * This is Team Data Page\r\n */\r\nexport default function TeamData() {\r\n  const classes = useStyles();\r\n\r\n  const [data, setData] = React.useState([]);\r\n  const [loaded, setLoaded] = React.useState(false);\r\n  const [filename, setFilename] = React.useState(\"\");\r\n  const [uploaded, setUploaded] = React.useState(false);\r\n  const [addOpen, setAddOpen] = React.useState(false);\r\n  const [addMultipleOpen, setAddMultipleOpen] = React.useState(false);\r\n  const [csv, setCsv] = React.useState(\"\");\r\n  const [editId, setEditId] = React.useState(\"\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [deleteOpen, setDeleteOpen] = React.useState(false);\r\n  const [deleteIds, setDeleteIds] = React.useState([]);\r\n  const [invalidDelete, setInvalidDelete] = React.useState(false);\r\n  const [regenerateOpen, setRegenerateOpen] = React.useState(false);\r\n  const [downloadOpen, setDownloadOpen] = React.useState(false);\r\n  const [invalidRegenerate, setInvalidRegenerate] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({});\r\n  const [errors, setErrors] = React.useState({\r\n    id: false,\r\n    teamName: false,\r\n    authority: false,\r\n  });\r\n  const [errorsMsg, setErrorsMsg] = React.useState({\r\n    id: \"\",\r\n    teamName: \"\",\r\n    authority: \"\",\r\n  });\r\n  const [newTeamMultiple, setNewTeamMultiple] = React.useState({\r\n    id: \"\",\r\n    teamName: \"\",\r\n    authority: \"\",\r\n  });\r\n  const [newTeam, setNewTeam] = React.useState({\r\n    id: \"\",\r\n    teamName: \"\",\r\n    authority: \"\",\r\n  });\r\n  const { userID, authority } = useSelector(selectSession);\r\n  const { subscribe } = useMakeNTU();\r\n  useEffect(() => {\r\n    subscribe({ id: userID, authority: authority, page: \"teamData\" });\r\n  }, []);\r\n  const showAlert = (severity, msg) => {\r\n    setAlert({ open: true, severity, msg });\r\n  };\r\n\r\n  const handleTeamDataReload = async () => {\r\n    try {\r\n      setData((await TeamDataAPI.getTeamData()).data);\r\n    } catch (err) {\r\n      showAlert(\"error\", \"Failed to load team data.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleTeamDataReload();\r\n  }, []);\r\n\r\n  const handleOpenAddMultiple = () => {\r\n    // // console.log(\"handleOpenAddMultiple\");\r\n    setUploaded(false);\r\n    setAddMultipleOpen(true);\r\n    setNewTeamMultiple({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setLoaded(false);\r\n    setFilename(\"\");\r\n  };\r\n\r\n  const handleCloseAddMultiple = () => {\r\n    // // console.log(\"handleCloseAddMultiple\");\r\n    setAddMultipleOpen(false);\r\n  };\r\n\r\n  const handleOpenAdd = () => {\r\n    // // console.log(data);\r\n    // // console.log(\"handleOpenAdd\");\r\n    setNewTeam({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setErrors({\r\n      id: false,\r\n      teamName: false,\r\n      authority: false,\r\n    });\r\n    setErrorsMsg({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setAddOpen(true);\r\n  };\r\n\r\n  const handleCloseAdd = () => {\r\n    // // console.log(\"handleCloseAdd\");\r\n    setNewTeam({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setErrors({\r\n      id: false,\r\n      teamName: false,\r\n      authority: false,\r\n    });\r\n    setErrorsMsg({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setAddOpen(false);\r\n  };\r\n\r\n  const handleOpenEdit = (id) => {\r\n    // // console.log(\"handleOpenEdit\");\r\n    setEditId(id);\r\n    // // console.log(id);\r\n    const team = data.find((e) => e.id === id);\r\n    setNewTeam({\r\n      id: team.id,\r\n      teamName: team.teamName,\r\n      authority: String(team.authority),\r\n    });\r\n    setErrors({\r\n      id: false,\r\n      teamName: false,\r\n      authority: false,\r\n    });\r\n    setErrorsMsg({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setAddOpen(true);\r\n  };\r\n\r\n  const handleCloseEdit = () => {\r\n    // // console.log(\"handleCloseEdit\");\r\n    setEditId(\"\");\r\n    setNewTeam({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setErrors({\r\n      id: false,\r\n      teamName: false,\r\n      authority: false,\r\n    });\r\n    setErrorsMsg({\r\n      id: \"\",\r\n      teamName: \"\",\r\n      authority: \"\",\r\n    });\r\n    setAddOpen(false);\r\n  };\r\n\r\n  const handleOpenDelete = (ids) => {\r\n    if (\r\n      data.filter((e) => ids.includes(e.id)).filter((e) => e.authority === 1)\r\n        .length !== 0\r\n    ) {\r\n      setInvalidDelete(true);\r\n    } else {\r\n      setInvalidDelete(false);\r\n      setDeleteIds(ids);\r\n    }\r\n    setDeleteOpen(true);\r\n  };\r\n\r\n  const handleCloseDelete = () => {\r\n    setDeleteOpen(false);\r\n  };\r\n\r\n  const handleOpenRegenerate = () => {\r\n    if (\r\n      data\r\n        .filter((e) => selected.includes(e.id))\r\n        .filter((e) => e.authority === 1).length !== 0\r\n    ) {\r\n      setInvalidRegenerate(true);\r\n    } else {\r\n      setInvalidRegenerate(false);\r\n    }\r\n    setRegenerateOpen(true);\r\n  };\r\n\r\n  const handleCloseRegenerate = () => {\r\n    setRegenerateOpen(false);\r\n  };\r\n\r\n  const handleOpenDownload = () => {\r\n    setDownloadOpen(true);\r\n  };\r\n\r\n  const handleCloseDownload = () => {\r\n    setDownloadOpen(false);\r\n  };\r\n\r\n  const onIdChange = (e) => {\r\n    setNewTeam({\r\n      ...newTeam,\r\n      id: e.target.value,\r\n    });\r\n  };\r\n\r\n  const onNameChange = (e) => {\r\n    setNewTeam({\r\n      ...newTeam,\r\n      teamName: e.target.value,\r\n    });\r\n  };\r\n\r\n  const onAuthorityChange = (e) => {\r\n    setNewTeam({\r\n      ...newTeam,\r\n      authority: e.target.value,\r\n    });\r\n  };\r\n\r\n  const testRepeatId = (id) => {\r\n    return data.map((e) => e.id.toUpperCase()).includes(id.toUpperCase());\r\n  };\r\n\r\n  const handleUploadCsv = async (efile) => {\r\n    // // console.log(efile);\r\n    if (efile) {\r\n      Papa.parse(efile, {\r\n        skipEmptyLines: true,\r\n        complete(results) {\r\n          let valid = true;\r\n          let repeat = false;\r\n          results.data.slice(1).forEach((team) => {\r\n            if (\r\n              // !/^(b|r|d)\\d{8}$/i.test(team[0]) ||\r\n              !team[1]\r\n            ) {\r\n              valid = false;\r\n              // // console.log(team);\r\n            }\r\n            if (testRepeatId(team[0])) {\r\n              repeat = true;\r\n              // // console.log(team);\r\n            }\r\n          });\r\n          if (valid && !repeat) {\r\n            const newData = results.data.slice(1).reduce((obj, cur) => {\r\n              return obj.concat([\r\n                {\r\n                  id: cur[0].toUpperCase(),\r\n                  teamName: cur[1],\r\n                  authority: 0,\r\n                },\r\n              ]);\r\n            }, []);\r\n            setNewTeamMultiple(newData);\r\n            setLoaded(true);\r\n            // // console.log(\"Multiple team data loaded\");\r\n            // // console.log(newData);\r\n            setFilename(efile.name);\r\n            return;\r\n          }\r\n          if (!valid && !repeat) {\r\n            showAlert(\"error\", \"Invalid team data format.\");\r\n          }\r\n          if (valid && repeat) {\r\n            showAlert(\"error\", \"Team UserId repeat.\");\r\n          }\r\n          if (!valid && repeat) {\r\n            showAlert(\r\n              \"error\",\r\n              \"Invalid team data format & Team UserId repeat.\"\r\n            );\r\n          }\r\n          setNewTeamMultiple({\r\n            id: \"\",\r\n            teamName: \"\",\r\n            authority: \"\",\r\n          });\r\n          setLoaded(false);\r\n          setFilename(\"\");\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddMultipleTeams = async () => {\r\n    // // console.log(\"handleAddMultipleTeams\");\r\n    if (loaded) {\r\n      const newData = newTeamMultiple.map((team) => {\r\n        const password = genPassword();\r\n        return { ...team, password };\r\n      });\r\n      // // console.log(newData);\r\n      // // console.log(\"start post datas\");\r\n      try {\r\n        await TeamDataAPI.postTeamData(\r\n          newData.map((team) => {\r\n            return {\r\n              teamID: team.id,\r\n              password: team.password,\r\n              teamName: team.teamName,\r\n              authority: Number(team.authority),\r\n            };\r\n          })\r\n        );\r\n        // // console.log(\"finish post\");\r\n        setUploaded(true);\r\n        setData(data.concat(newData));\r\n        // // console.log(newData);\r\n        // // console.log(data);\r\n\r\n        setNewTeamMultiple({\r\n          id: \"\",\r\n          teamName: \"\",\r\n          authority: \"\",\r\n        });\r\n\r\n        setLoaded(false);\r\n        const csvData = [];\r\n        newData.forEach((e) => {\r\n          csvData.push({\r\n            teamID: e.id,\r\n            teamName: e.teamName,\r\n            password: e.password,\r\n          });\r\n        });\r\n        setCsv(Papa.unparse(csvData));\r\n        showAlert(\"success\", \"Add multiple team data complete.\");\r\n      } catch (err) {\r\n        showAlert(\"error\", \"Failed to Add multiple team data.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const download = (filename, text) => {\r\n    const element = document.createElement(\"a\");\r\n    element.setAttribute(\r\n      \"href\",\r\n      `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`\r\n    );\r\n    element.setAttribute(\"download\", filename);\r\n\r\n    element.style.display = \"none\";\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  };\r\n\r\n  const handleDownloadPassword = () => {\r\n    // // console.log(\"download password\");\r\n    if (\r\n      data.filter((e) => selected.includes(e.id)).filter((e) => !e.password)\r\n        .length === 0\r\n    ) {\r\n      // // console.log(data.filter((e) => selected.includes(e.id)));\r\n      const csvData = [];\r\n      // // console.log(data);\r\n      data\r\n        .slice(1)\r\n        .filter((e) => selected.includes(e.id))\r\n        .forEach((e) => {\r\n          csvData.push({\r\n            teamID: e.id,\r\n            teamName: e.teamName,\r\n            password: e.password,\r\n          });\r\n        });\r\n      download(\"datas.csv\", Papa.unparse(csvData));\r\n    } else {\r\n      handleOpenDownload();\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    // // console.log(csv);\r\n    download(\"datas.csv\", csv);\r\n  };\r\n\r\n  const handleGeneratePassword = async () => {\r\n    // // console.log(\"generate password\");\r\n    const passwords = [];\r\n    const updateData = data.map((e) => {\r\n      if (selected.includes(e.id)) {\r\n        const password = genPassword();\r\n        const team = e;\r\n        team.password = password;\r\n        passwords.push({\r\n          teamID: e.id,\r\n          new_password: password,\r\n        });\r\n        return team;\r\n      }\r\n      return e;\r\n    });\r\n    try {\r\n      await PasswordAPI.putPassword(passwords);\r\n      showAlert(\"success\", \"Generate password complete.\");\r\n      setData(updateData);\r\n      handleCloseRegenerate();\r\n      setSelected([]);\r\n    } catch (err) {\r\n      showAlert(\"error\", \"Failed to regenerate password.\");\r\n      handleCloseRegenerate();\r\n    }\r\n  };\r\n\r\n  const judgeNewTeam = () => {\r\n    // // console.log(newTeam);\r\n    let error = false;\r\n    let newErrors = errors;\r\n    let newErrorsMsg = errorsMsg;\r\n    if (!newTeam.id) {\r\n      newErrors = { ...newErrors, id: true };\r\n      newErrorsMsg = { ...newErrorsMsg, id: \"id should not be empty\" };\r\n      error = true;\r\n    }\r\n    // else if (!/^(b|r|d)\\d{8}$/i.test(newTeam.id)) {\r\n    //   newErrors = { ...newErrors, id: true };\r\n    //   newErrorsMsg = { ...newErrorsMsg, id: \"id invalid format\" };\r\n    //   error = true;\r\n    // }\r\n    else if (editId === \"\" && testRepeatId(newTeam.id)) {\r\n      newErrors = { ...newErrors, id: true };\r\n      newErrorsMsg = { ...newErrorsMsg, id: \"repeat userId\" };\r\n      error = true;\r\n    } else {\r\n      newErrors = { ...newErrors, id: false };\r\n      newErrorsMsg = { ...newErrorsMsg, id: \"\" };\r\n    }\r\n    if (!newTeam.teamName) {\r\n      newErrors = { ...newErrors, teamName: true };\r\n      newErrorsMsg = {\r\n        ...newErrorsMsg,\r\n        teamName: \"teamName should not be empty\",\r\n      };\r\n      error = true;\r\n    } else {\r\n      newErrors = { ...newErrors, teamName: false };\r\n      newErrorsMsg = { ...newErrorsMsg, teamName: \"\" };\r\n    }\r\n    // if (!newTeam.authority) {\r\n    //   newErrors = { ...newErrors, authority: true };\r\n    //   newErrorsMsg = {\r\n    //     ...newErrorsMsg,\r\n    //     authority: \"authority should not be empty\",\r\n    //   };\r\n    //   error = true;\r\n    // } else\r\n    if (!/^[012]$/.test(newTeam.authority)) {\r\n      newErrors = { ...newErrors, authority: true };\r\n      newErrorsMsg = {\r\n        ...newErrorsMsg,\r\n        authority: \"authority should be a 0, 1\",\r\n      };\r\n      error = true;\r\n    } else {\r\n      newErrors = { ...newErrors, authority: false };\r\n      newErrorsMsg = { ...newErrorsMsg, authority: \"\" };\r\n    }\r\n    setErrors(newErrors);\r\n    setErrorsMsg(newErrorsMsg);\r\n    return error;\r\n  };\r\n\r\n  const handleAddTeam = async () => {\r\n    const error = judgeNewTeam();\r\n\r\n    if (!error) {\r\n      const password = genPassword();\r\n      try {\r\n        await TeamDataAPI.postTeamData([\r\n          {\r\n            teamID: newTeam.id,\r\n            password,\r\n            teamName: newTeam.teamName,\r\n            authority: Number(newTeam.authority),\r\n            myCards: {},\r\n          },\r\n        ]);\r\n        setData(\r\n          data.concat({\r\n            ...newTeam,\r\n            id: newTeam.id.toUpperCase(),\r\n            password,\r\n            authority: Number(newTeam.authority),\r\n          })\r\n        );\r\n        setNewTeam({\r\n          id: \"\",\r\n          teamName: \"\",\r\n          authority: \"\",\r\n        });\r\n        handleCloseAdd();\r\n        showAlert(\"success\", \"Add team data success.\");\r\n      } catch {\r\n        handleCloseAdd();\r\n        showAlert(\"error\", \"Failed to Add team data.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditTeam = async () => {\r\n    const error = judgeNewTeam();\r\n    if (!error) {\r\n      try {\r\n        await TeamDataAPI.putTeamData([\r\n          {\r\n            teamID: newTeam.id,\r\n            teamName: newTeam.teamName,\r\n            authority: Number(newTeam.authority),\r\n          },\r\n        ]);\r\n        setData(\r\n          data.map((e) => {\r\n            if (e.id === newTeam.id) {\r\n              return {\r\n                id: newTeam.id,\r\n                teamName: newTeam.teamName,\r\n                authority: Number(newTeam.authority),\r\n              };\r\n            }\r\n            return e;\r\n          })\r\n        );\r\n        setNewTeam({\r\n          id: \"\",\r\n          teamName: \"\",\r\n          authority: \"\",\r\n        });\r\n        handleCloseEdit();\r\n        showAlert(\"success\", \"Edit team data success.\");\r\n      } catch (err) {\r\n        handleCloseEdit();\r\n        showAlert(\"error\", \"Failed to Edit team data.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteTeam = async () => {\r\n    try {\r\n      await TeamDataAPI.deleteTeamData(deleteIds);\r\n      setData(data.filter((team) => !deleteIds.includes(team.id)));\r\n      // // console.log(\"delete team data finish : \");\r\n      // // console.log(deleteIds);\r\n      setDeleteIds([]);\r\n      setSelected([]);\r\n      handleCloseDelete();\r\n      showAlert(\"success\", \"delete team data success.\");\r\n    } catch (err) {\r\n      showAlert(\"error\", \"Failed to delete team data.\");\r\n      handleCloseDelete();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Dialog\r\n        aria-labelledby=\"simple-dialog-title\"\r\n        disableBackdropClick\r\n        open={addOpen}\r\n        onClose={handleCloseAdd}\r\n      >\r\n        {editId === \"\" ? (\r\n          <DialogTitle id=\"simple-dialog-title\">Add Single Team</DialogTitle>\r\n        ) : (\r\n          <DialogTitle id=\"simple-dialog-title\">Edit Single Team</DialogTitle>\r\n        )}\r\n        <DialogContent sx={{ overflow: \"hidden\" }}>\r\n          <TextField\r\n            id=\"teamID\"\r\n            label=\"teamID\"\r\n            type=\"text\"\r\n            fullWidth\r\n            value={newTeam.id}\r\n            error={errors.id}\r\n            onChange={onIdChange}\r\n            helperText={errorsMsg.id}\r\n            disabled={editId !== \"\"}\r\n            sx={{ margin: \"5px\" }}\r\n          />\r\n          <TextField\r\n            id=\"teamName\"\r\n            label=\"teamName\"\r\n            type=\"text\"\r\n            fullWidth\r\n            value={newTeam.teamName}\r\n            error={errors.teamName}\r\n            onChange={onNameChange}\r\n            helperText={errorsMsg.teamName}\r\n            sx={{ margin: \"5px\" }}\r\n          />\r\n\r\n          <FormControl fullWidth>\r\n            <InputLabel>authority</InputLabel>\r\n            <Select\r\n              fullWidth\r\n              value={newTeam.authority}\r\n              error={errors.authority}\r\n              onChange={onAuthorityChange}\r\n              sx={{ margin: \"5px\" }}\r\n            >\r\n              {authorityData.map((e) => (\r\n                <MenuItem key={e} value={e}>\r\n                  {e}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={editId === \"\" ? handleCloseAdd : handleCloseEdit}\r\n            color=\"secondary\"\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={editId === \"\" ? handleAddTeam : handleEditTeam}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            {editId === \"\" ? \"Add\" : \"Edit\"}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        aria-labelledby=\"simple-dialog-title\"\r\n        disableBackdropClick\r\n        open={deleteOpen}\r\n        onClose={handleCloseDelete}\r\n      >\r\n        {invalidDelete ? (\r\n          <DialogTitle id=\"simple-dialog-title\">\r\n            Teams with authority 1 are invalid to delete\r\n          </DialogTitle>\r\n        ) : (\r\n          <DialogTitle id=\"simple-dialog-title\">\r\n            Are you sure to delete {deleteIds.length} teams?\r\n          </DialogTitle>\r\n        )}\r\n        <DialogContent>\r\n          {invalidDelete\r\n            ? data\r\n                .filter((e) => selected.includes(e.id))\r\n                .filter((e) => e.authority === 1)\r\n                .map((e) => (\r\n                  <Typography key={e.id}>\r\n                    {`id: ${e.id}, \r\n              teamName: ${e.teamName},\r\n              authority: ${e.authority}`}\r\n                  </Typography>\r\n                ))\r\n            : data\r\n                .filter((e) => deleteIds.includes(e.id))\r\n                .map((e) => e.id)\r\n                .map((id) => (\r\n                  <Typography key={id}>\r\n                    {`id: ${data.find((e) => e.id === id).id}, \r\n              teamName: ${data.find((e) => e.id === id).teamName},\r\n              authority: ${data.find((e) => e.id === id).authority}`}\r\n                  </Typography>\r\n                ))}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          {invalidDelete ? (\r\n            <Button onClick={handleCloseDelete}>Done</Button>\r\n          ) : (\r\n            <>\r\n              <Button onClick={handleCloseDelete} color=\"secondary\">\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={handleDeleteTeam}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n              >\r\n                Delete\r\n              </Button>\r\n            </>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        aria-labelledby=\"simple-dialog-title\"\r\n        disableBackdropClick\r\n        open={addMultipleOpen}\r\n        onClose={handleCloseAddMultiple}\r\n      >\r\n        {uploaded ? (\r\n          <DialogTitle id=\"simple-dialog-title\">Upload Completed</DialogTitle>\r\n        ) : (\r\n          <DialogTitle id=\"simple-dialog-title\">\r\n            Add multiple teams from csv file\r\n          </DialogTitle>\r\n        )}\r\n        <DialogContent>\r\n          {uploaded ? (\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              component=\"span\"\r\n              onClick={handleDownload}\r\n            >\r\n              Download password\r\n            </Button>\r\n          ) : (\r\n            <label htmlFor=\"contained-button-file\">\r\n              <input\r\n                accept=\".csv\"\r\n                className={classes.input}\r\n                id=\"contained-button-file\"\r\n                type=\"file\"\r\n                onChange={(e) => handleUploadCsv(e.target.files[0])}\r\n              />\r\n              <Button variant=\"contained\" color=\"primary\" component=\"span\">\r\n                Select csv file\r\n              </Button>\r\n            </label>\r\n          )}\r\n          {loaded && !uploaded ? filename : \"\"}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          {uploaded ? (\r\n            <Button\r\n              onClick={handleCloseAddMultiple}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              Finish\r\n            </Button>\r\n          ) : (\r\n            <>\r\n              <Button onClick={handleCloseAddMultiple} color=\"secondary\">\r\n                Cancel\r\n              </Button>\r\n              {loaded ? (\r\n                <Button\r\n                  onClick={handleAddMultipleTeams}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                >\r\n                  Upload\r\n                </Button>\r\n              ) : (\r\n                <> </>\r\n              )}\r\n            </>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        aria-labelledby=\"simple-dialog-title\"\r\n        disableBackdropClick\r\n        open={regenerateOpen}\r\n        onClose={handleCloseRegenerate}\r\n      >\r\n        {invalidRegenerate ? (\r\n          <DialogTitle id=\"simple-dialog-title\">\r\n            These team are invalid to regenerate password:\r\n          </DialogTitle>\r\n        ) : (\r\n          <DialogTitle id=\"simple-dialog-title\">\r\n            Are you sure to Regenerate password of {selected.length} teams?\r\n          </DialogTitle>\r\n        )}\r\n        <DialogContent>\r\n          {invalidRegenerate\r\n            ? data\r\n                .filter((e) => selected.includes(e.id))\r\n                .filter((e) => e.authority === 1)\r\n                .map((e) => (\r\n                  <Typography key={e.id}>\r\n                    {`id: ${e.id}, \r\n              teamName: ${e.teamName},\r\n              authority: ${e.authority}`}\r\n                  </Typography>\r\n                ))\r\n            : data\r\n                .filter((e) => selected.includes(e.id))\r\n                .map((e) => e.id)\r\n                .map((id) => (\r\n                  <Typography key={id}>\r\n                    {`id: ${data.find((e) => e.id === id).id}, \r\n              teamName: ${data.find((e) => e.id === id).teamName},\r\n              authority: ${data.find((e) => e.id === id).authority}`}\r\n                  </Typography>\r\n                ))}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          {invalidRegenerate ? (\r\n            <Button\r\n              onClick={handleCloseRegenerate}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              Close\r\n            </Button>\r\n          ) : (\r\n            <>\r\n              <Button onClick={handleCloseRegenerate} color=\"secondary\">\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={handleGeneratePassword}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n              >\r\n                Regenerate\r\n              </Button>\r\n            </>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        aria-labelledby=\"simple-dialog-title\"\r\n        disableBackdropClick\r\n        open={downloadOpen}\r\n        onClose={handleCloseDownload}\r\n      >\r\n        <DialogTitle id=\"simple-dialog-title\">\r\n          These team are invalid to download password\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {data\r\n            .filter((e) => selected.includes(e.id))\r\n            .filter((e) => !e.password)\r\n            .map((e) => (\r\n              <Typography key={e.id}>\r\n                {`id: ${e.id}, \r\n              teamName: ${e.teamName},\r\n              authority: ${e.authority}`}\r\n              </Typography>\r\n            ))}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleCloseDownload}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"flex-start\"\r\n        direction=\"row\"\r\n      >\r\n        <Grid item sm={12}>\r\n          <Grid\r\n            container\r\n            spacing={1}\r\n            justify=\"flex-start\"\r\n            alignItems=\"flex-start\"\r\n            direction=\"row\"\r\n          >\r\n            <Grid item>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleOpenAdd}\r\n                disabled={authority !== 1}\r\n              >\r\n                Add Single Team\r\n              </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleOpenAddMultiple}\r\n                disabled={authority !== 1}\r\n              >\r\n                Add Teams (csv)\r\n              </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                onClick={handleDownloadPassword}\r\n                disabled={selected.length === 0 || authority !== 1}\r\n              >\r\n                Download Password\r\n              </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleOpenRegenerate}\r\n                disabled={selected.length === 0 || authority !== 1}\r\n              >\r\n                Generate Password\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item sm={12}>\r\n          <TeamTable\r\n            data={data}\r\n            handleEdit={handleOpenEdit}\r\n            handleDelete={handleOpenDelete}\r\n            selected={selected}\r\n            setSelected={setSelected}\r\n            showAlert={showAlert}\r\n            authority={authority}\r\n          />\r\n        </Grid>\r\n        {/* <Hidden smDown>\r\n          <Grid item md={3} />\r\n        </Hidden> */}\r\n      </Grid>\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={alert?.open}\r\n        autoHideDuration={5000}\r\n        onClose={() => setAlert({ ...alert, open: false })}\r\n      >\r\n        <Alert variant=\"filled\" severity={alert?.severity}>\r\n          {alert?.msg}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useState } from \"react\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Grid,\r\n  Box,\r\n} from \"@mui/material\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport Papa from \"papaparse\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst HeaderContainer = styled.div`\r\n  width: 100%;\r\n  height: auto;\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  width: 80%;\r\n  height: auto;\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    maxWidth: \"1000px\",\r\n    padding: \"0px\",\r\n    \"& > *\": {\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n  input: {\r\n    display: \"none\",\r\n  },\r\n}));\r\nexport default function Header({ setSaving, ableSave, data }) {\r\n  const classes = useStyles();\r\n  const [importOpen, setImportOpen] = useState(false);\r\n  const [exportOpen, setExportOpen] = useState(false);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [newBoardData, setNewBoardData] = useState([]);\r\n  const [fileName, setFilename] = useState(\"\");\r\n  const [uploaded, setUploaded] = useState(false);\r\n  const [importError, setImportError] = useState(false);\r\n  const [csv, setCsv] = React.useState(\"\");\r\n  const [resetPageOpen, setResetPageOpen] = React.useState(false);\r\n  const { dataINIT, handleReplaceBoard, showAlert, resetDataBase } =\r\n    useMakeNTU();\r\n  useEffect(() => {\r\n    const csvData = data.map((item) => {\r\n      const { id, name, category, limit, totalNum, image } = item;\r\n      return { id, name, category, limit, totalNum, image };\r\n    });\r\n    setCsv(Papa.unparse(csvData));\r\n  }, [data]);\r\n  const handleInitData = () => {\r\n    dataINIT();\r\n    handleCloseImport();\r\n  };\r\n\r\n  const handleCloseImport = () => {\r\n    setNewBoardData([]);\r\n    setFilename(\"\");\r\n    setLoaded(false);\r\n    setImportError(false);\r\n    setImportOpen(false);\r\n  };\r\n  const handleImport = () => {\r\n    // console.log(\"handleImport\");\r\n    if (loaded) {\r\n      // console.log(\"uploading\");\r\n      try {\r\n        handleReplaceBoard(newBoardData);\r\n        setUploaded(true);\r\n        setLoaded(false);\r\n        setCsv(Papa.unparse(newBoardData));\r\n      } catch (e) {\r\n        showAlert(\"error\", \"Upload file Failed.\");\r\n        // console.log(e);\r\n      }\r\n    }\r\n  };\r\n  const handleOpenImport = () => {\r\n    setImportOpen(true);\r\n  };\r\n  const testRepeatArr = (arr) => {\r\n    return new Set(arr).size !== arr.length;\r\n  };\r\n  const handleUploadCsv = (efile) => {\r\n    // // console.log(efile);\r\n    if (efile) {\r\n      Papa.parse(efile, {\r\n        skipEmptyLines: true,\r\n        complete(results) {\r\n          let valid = true;\r\n          // console.log(results.data.slice(1));\r\n          results.data.slice(1).forEach((board) => {\r\n            if (!board[1] || !board[2] || !board[3] || !board[4]) {\r\n              valid = false;\r\n            }\r\n          });\r\n          const IDArr = results.data.slice(1).map((e) => e[0]);\r\n          const NameArr = results.data.slice(1).map((e) => e[1]);\r\n          let repeatID = testRepeatArr(IDArr);\r\n          let repeatName = testRepeatArr(NameArr);\r\n          let repeat = repeatID || repeatName;\r\n          if (valid && !repeat) {\r\n            const newData = results.data.slice(1).reduce((obj, cur) => {\r\n              return obj.concat([\r\n                {\r\n                  id: cur[0].toUpperCase(),\r\n                  name: cur[1],\r\n                  category: cur[2],\r\n                  limit: cur[3],\r\n                  totalNum: cur[4],\r\n                  remain: cur[4],\r\n                  image: cur[5] ?? \"\",\r\n                },\r\n              ]);\r\n            }, []);\r\n            // console.log(newData);\r\n            setNewBoardData(newData);\r\n            setImportError(false);\r\n            setLoaded(true);\r\n            setFilename(efile.name);\r\n            showAlert(\"success\", \"File Loaded.\", 2000);\r\n            return;\r\n          }\r\n          if (!valid && !repeat) {\r\n            showAlert(\"error\", \"Invalid data format.\", 3000);\r\n            setImportError(true);\r\n          }\r\n          if (valid && repeat) {\r\n            showAlert(\r\n              \"error\",\r\n              `Team ${\r\n                repeatID && repeatName ? \"ID&Name\" : repeatName ? \"Name\" : \"ID\"\r\n              } repeat.`,\r\n              3000\r\n            );\r\n            setImportError(true);\r\n          }\r\n          if (!valid && repeat) {\r\n            showAlert(\r\n              \"error\",\r\n              `Invalid data format & Team ${\r\n                repeatID && repeatName ? \"ID&Name\" : repeatName ? \"Name\" : \"ID\"\r\n              } repeat..`,\r\n              3000\r\n            );\r\n            setImportError(true);\r\n          }\r\n          // console.log(\"file\");\r\n          setNewBoardData([]);\r\n          setLoaded(false);\r\n          setFilename(\"\");\r\n        },\r\n      });\r\n    }\r\n  };\r\n  const handleCloseExport = () => {\r\n    setExportOpen(false);\r\n  };\r\n  const download = (filename, text) => {\r\n    const element = document.createElement(\"a\");\r\n    element.setAttribute(\r\n      \"href\",\r\n      `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`\r\n    );\r\n    element.setAttribute(\"download\", filename);\r\n\r\n    element.style.display = \"none\";\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  };\r\n  const handleExport = () => {\r\n    download(`boards_${new Date().getTime()}.csv`, csv);\r\n    handleCloseExport();\r\n  };\r\n  const handleOpenExport = () => {\r\n    setExportOpen(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    setSaving(true);\r\n  };\r\n  const handleReset = () => {\r\n    resetDataBase();\r\n    handleCloseReset();\r\n  };\r\n  const handleCloseReset = () => {\r\n    setResetPageOpen(false);\r\n  };\r\n  const handleOpenReset = () => {\r\n    setResetPageOpen(true);\r\n  };\r\n  return (\r\n    <HeaderContainer>\r\n      <ButtonContainer>\r\n        <Dialog\r\n          aria-labelledby=\"simple-dialog-title\"\r\n          // disableBackdropClick\r\n          open={importOpen}\r\n          onClose={handleCloseImport}\r\n          // sx={{ backgroundColor: \"rgba(0,0,0,1)\" }}\r\n        >\r\n          <DialogTitle id=\"simple-dialog-title\">Importing Data</DialogTitle>\r\n          <DialogContent>\r\n            <Box sx={{ minWidth: \"15vw\", minHeight: \"10vh\" }}>\r\n              <label htmlFor=\"contained-button-file\">\r\n                <input\r\n                  accept=\".csv\"\r\n                  className={classes.input}\r\n                  id=\"contained-button-file\"\r\n                  type=\"file\"\r\n                  onChange={(e) => handleUploadCsv(e.target.files[0])}\r\n                />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color={importError ? \"error\" : \"primary\"}\r\n                  component=\"span\"\r\n                >\r\n                  Import csv file\r\n                </Button>\r\n              </label>\r\n              {loaded && !uploaded ? fileName : \"\"}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleCloseImport} color=\"secondary\">\r\n              Cancel\r\n            </Button>\r\n\r\n            {uploaded ? (\r\n              <Button\r\n                onClick={handleCloseImport}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n              >\r\n                Finish\r\n              </Button>\r\n            ) : (\r\n              <>\r\n                {/* <Button\r\n                  onClick={handleInitData}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  sx={{ m: \"5px\" }}\r\n                >\r\n                  {\"Init\"}\r\n                </Button> */}\r\n                {loaded ? (\r\n                  <Button\r\n                    onClick={handleImport}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                  >\r\n                    Upload\r\n                  </Button>\r\n                ) : (\r\n                  <> </>\r\n                )}\r\n              </>\r\n            )}\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Dialog\r\n          aria-labelledby=\"simple-dialog-title\"\r\n          // disableBackdropClick\r\n          open={exportOpen}\r\n          onClose={handleCloseExport}\r\n          // sx={{ backgroundColor: \"rgba(0,0,0,1)\" }}\r\n        >\r\n          <DialogTitle id=\"simple-dialog-title\">Exporting Data</DialogTitle>\r\n          <DialogContent>\r\n            <Box sx={{ minWidth: \"15vw\", minHeight: \"10vh\" }} />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleCloseExport} color=\"secondary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleExport} variant=\"contained\" color=\"primary\">\r\n              {\"Export\"}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Dialog\r\n          aria-labelledby=\"simple-dialog-title\"\r\n          // disableBackdropClick\r\n          open={resetPageOpen}\r\n          onClose={handleCloseReset}\r\n          // sx={{ backgroundColor: \"rgba(0,0,0,1)\" }}\r\n        >\r\n          <DialogTitle id=\"simple-dialog-title\">Exporting Data</DialogTitle>\r\n          <DialogContent>\r\n            <Box sx={{ minWidth: \"15vw\", minHeight: \"10vh\" }}>\r\n              {\"Are you sure you want to RESET!? :(\"}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleCloseReset} color=\"secondary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleReset} variant=\"contained\" color=\"primary\">\r\n              {\"Reset\"}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Grid\r\n          container\r\n          spacing={1}\r\n          // justify=\"center\"\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"flex-start\"\r\n          direction=\"row\"\r\n        >\r\n          <Grid item sm={5}>\r\n            <Grid\r\n              container\r\n              spacing={1}\r\n              justify=\"flex-start\"\r\n              alignItems=\"flex-start\"\r\n              direction=\"row\"\r\n            >\r\n              <Grid item>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenImport}\r\n                >\r\n                  Import\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenExport}\r\n                >\r\n                  Export\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item sm={5}>\r\n            <Grid\r\n              container\r\n              spacing={1}\r\n              justifyContent=\"flex-end\"\r\n              alignItems=\"flex-start\"\r\n              direction=\"row\"\r\n            >\r\n              <Grid item>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenReset}\r\n                >\r\n                  Reset\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleSave}\r\n                  disabled={!ableSave}\r\n                >\r\n                  Save\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </ButtonContainer>\r\n    </HeaderContainer>\r\n  );\r\n}\r\n","import React, { forwardRef, useEffect, useState } from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport {\r\n  Paper,\r\n  Typography,\r\n  ButtonBase,\r\n  Grid,\r\n  TextField,\r\n  CardMedia,\r\n  IconButton,\r\n} from \"@mui/material\";\r\nimport PropTypes from \"prop-types\";\r\nimport { NumericFormat } from \"react-number-format\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nconst NumberFormatCustom = forwardRef(function NumberFormatCustom(props, ref) {\r\n  const { onChange, ...other } = props;\r\n\r\n  return (\r\n    <NumericFormat\r\n      {...other}\r\n      getInputRef={ref}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      //   thousandSeparator\r\n      //   isNumericString\r\n      //   prefix=\"$\"\r\n    />\r\n  );\r\n});\r\n\r\nNumberFormatCustom.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\nconst Img = styled(CardMedia)({\r\n  margin: \"auto\",\r\n  display: \"block\",\r\n  maxWidth: \"100%\",\r\n  maxHeight: \"100%\",\r\n});\r\n\r\nexport default function ComplexGrid({\r\n  handleDeleteCard,\r\n  data,\r\n  changedData,\r\n  setChangedData,\r\n}) {\r\n  const [values, setValues] = useState({});\r\n  useEffect(() => {\r\n    setValues({ limit: data.limit, totalNum: data.totalNum });\r\n    // // console.log(data);\r\n  }, []);\r\n  // // console.log(data);\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    const changingValue = parseInt(value);\r\n\r\n    setValues({\r\n      ...values,\r\n      [name]: changingValue,\r\n    });\r\n\r\n    const existing = changedData.filter((item) => item.id !== data.id);\r\n    if (\r\n      JSON.stringify({\r\n        limit: values.limit,\r\n        totalNum: values.totalNum,\r\n        [name]: changingValue,\r\n      }) !==\r\n      JSON.stringify({\r\n        limit: data.limit,\r\n        totalNum: data.totalNum,\r\n      })\r\n    ) {\r\n      setChangedData([\r\n        ...existing,\r\n        { ...data, ...values, [name]: changingValue },\r\n      ]);\r\n    } else {\r\n      setChangedData(existing);\r\n    }\r\n  };\r\n  return (\r\n    <Paper\r\n      sx={{\r\n        p: 2,\r\n        margin: \"5px\",\r\n        width: \"20%\",\r\n        maxHeight: \"330px\",\r\n        height: \"auto\",\r\n        maxWidth: 230,\r\n        minWidth: 150,\r\n        flexGrow: 1,\r\n        position: \"relative\",\r\n        backgroundColor: (theme) =>\r\n          theme.palette.mode === \"dark\" ? \"#1A2027\" : \"#fff\",\r\n      }}\r\n    >\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid\r\n          item\r\n          sx={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <Typography\r\n            gutterBottom\r\n            variant=\"subtitle1\"\r\n            component=\"div\"\r\n            autoComplete=\"off\"\r\n            sx={{\r\n              width: \"100%\",\r\n              padding: \"2px\",\r\n              backgroundColor: \"rgba(255,255,255,0.3)\",\r\n              borderRadius: \"10px\",\r\n              borderWidth: \"1rem\",\r\n              borderColor: \"#1d1d1d\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {data?.name || \"Untitled\"}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          sx={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <Typography\r\n            gutterBottom\r\n            variant=\"subtitle1\"\r\n            component=\"div\"\r\n            autoComplete=\"off\"\r\n            sx={{\r\n              width: \"100%\",\r\n              fontSize: \"0.2rem\",\r\n              color: \"rgba(255,255,255,0.8)\",\r\n            }}\r\n          >\r\n            {`category${\" : \"}${data?.category || \"Untitled\"}`}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          {/*\r\n          <Box\r\n            component=\"img\"\r\n            sx={{\r\n              maxWidth: 128,\r\n              maxHeight: 128,\r\n            }}\r\n            alt=\"The house from the offer.\"\r\n            display=\"flex\"\r\n            src=\"https://images.modasena.com/firfirli-scuba-tesettur-jile-kiremit-343057-60-B.jpg\"\r\n          />*/}\r\n          {\r\n            <IconButton sx={{ width: 128, height: 128 }} disabled={true}>\r\n              <Img\r\n                alt=\"img not found\"\r\n                src={data?.image || \"/photoData/MakeNTU2022_icon.png\"}\r\n                component=\"img\"\r\n              />\r\n            </IconButton>\r\n          }\r\n          {/*<ButtonBase sx={{ width: 128, height: 128 }}>\r\n            <Img alt=\"no img\" src={\"https://lurl.cc/1F8aOb\"} />\r\n          </ButtonBase>\r\n          */}\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justifyContent=\"space-around\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\r\n            {\"上限  :\"}\r\n          </Typography>\r\n          <TextField\r\n            id=\"formatted-numberformat-input_limit\"\r\n            label=\"limit\"\r\n            value={values.limit}\r\n            onChange={handleChange}\r\n            name=\"limit\"\r\n            InputProps={{\r\n              inputComponent: NumberFormatCustom,\r\n            }}\r\n            variant=\"standard\"\r\n            sx={{ width: \"50%\" }}\r\n            autoComplete=\"off\"\r\n            disabled={data?.remain !== data?.totalNum}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justifyContent=\"space-around\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\r\n            {\"庫存  :\"}\r\n          </Typography>\r\n          <TextField\r\n            id=\"formatted-numberformat-input_totalNum\"\r\n            label=\"stock\"\r\n            value={values.totalNum}\r\n            onChange={handleChange}\r\n            name=\"totalNum\"\r\n            InputProps={{\r\n              inputComponent: NumberFormatCustom,\r\n            }}\r\n            variant=\"standard\"\r\n            sx={{ width: \"50%\" }}\r\n            autoComplete=\"off\"\r\n            disabled={data?.remain !== data?.totalNum}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <ButtonBase\r\n        sx={{\r\n          width: \"30px\",\r\n          height: \"30px\",\r\n          borderRadius: \"20px\",\r\n          position: \"absolute\",\r\n          right: 0,\r\n          top: 0,\r\n          opacity: data?.remain !== data?.totalNum ? 0.7 : 1,\r\n        }}\r\n        disabled={data?.remain !== data?.totalNum}\r\n        onClick={() => handleDeleteCard(data.id)}\r\n      >\r\n        <CancelIcon />\r\n      </ButtonBase>\r\n    </Paper>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogContentText from \"@mui/material/DialogContentText\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\n\r\nexport default function ImgDialog(props) {\r\n  const { uploadImg, setOpenDialog, open } = props;\r\n  const [myURL, setMyURL] = React.useState(\"\");\r\n  const handleClose = (link) => {\r\n    setMyURL(\"\");\r\n    setOpenDialog(false);\r\n  };\r\n  // open, isOpen,\r\n  //  <Dialog open={open} onClose={handleClose}></Dialog>\r\n  return (\r\n    <div>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>Image</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>請貼上圖片的網址</DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"img\"\r\n            name=\"img\"\r\n            fullWidth\r\n            variant=\"standard\"\r\n            value={myURL}\r\n            onChange={(e) => setMyURL(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} variant=\"contained\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={() => uploadImg(myURL)} variant=\"contained\">\r\n            Upload\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, useEffect, useState } from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport {\r\n  Paper,\r\n  Typography,\r\n  ButtonBase,\r\n  Grid,\r\n  TextField,\r\n  IconButton,\r\n  Box,\r\n} from \"@mui/material\";\r\nimport PropTypes from \"prop-types\";\r\nimport { NumericFormat } from \"react-number-format\";\r\nimport AddCircleIcon from \"@mui/icons-material/AddCircle\";\r\nimport AddPhotoAlternateOutlinedIcon from \"@mui/icons-material/AddPhotoAlternateOutlined\";\r\nimport ImgDialog from \"./ImgDialog\";\r\n\r\nconst NumberFormatCustom = forwardRef(function NumberFormatCustom(props, ref) {\r\n  const { onChange, ...other } = props;\r\n  return (\r\n    <NumericFormat\r\n      {...other}\r\n      getInputRef={ref}\r\n      onValueChange={(values) => {\r\n        onChange({\r\n          target: {\r\n            name: props.name,\r\n            value: values.value,\r\n          },\r\n        });\r\n      }}\r\n      //   thousandSeparator\r\n      //   isNumericString\r\n      //   prefix=\"$\"\r\n    />\r\n  );\r\n});\r\n\r\nNumberFormatCustom.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\nconst Img = styled(Box)({\r\n  margin: \"auto\",\r\n  display: \"block\",\r\n  maxWidth: \"100%\",\r\n  maxHeight: \"100%\",\r\n  fontSize: \"1rem\",\r\n});\r\nComplexGrid.propTypes = {\r\n  setAddCardData: PropTypes.func.isRequired,\r\n};\r\nexport default function ComplexGrid({ setAddCardData }) {\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    limit: 1,\r\n    totalNum: 5,\r\n    image: \"\",\r\n  });\r\n  const uploadImg = (link) => {\r\n    // console.log(link, \"link\");\r\n    setValues(() => ({ ...values, image: link }));\r\n    setOpenDialog(false);\r\n  };\r\n  const [hasFocus, setHasFocus] = useState({ name: false, category: false });\r\n  // const nameInputRef = useRef(null);\r\n  const handleChange = (event) => {\r\n    setValues({\r\n      ...values,\r\n      [event.target.name]:\r\n        event.target.name === \"name\" || event.target.name === \"category\"\r\n          ? event.target.value\r\n          : parseInt(event.target.value),\r\n    });\r\n  };\r\n  const handleKeyDown = (event) => {\r\n    if (event.key !== \"Enter\") {\r\n      // // // console.log(event.key);\r\n      return;\r\n    }\r\n    setHasFocus(() => {\r\n      return { name: true, category: true };\r\n    });\r\n    let { name, limit, totalNum, category } = values;\r\n    if (name && limit && totalNum && category) {\r\n      setAddCardData(values);\r\n      if (event.target.name === \"name\") event.target.value = \"\";\r\n      setValues({\r\n        ...values,\r\n        name: \"\",\r\n      });\r\n    } else {\r\n      // // console.log(\"something missing: \", name, limit, totalNum);\r\n    }\r\n  };\r\n  // // // console.log(values);\r\n  return (\r\n    <Paper\r\n      sx={{\r\n        p: 2,\r\n        margin: \"5px\",\r\n        width: \"20%\",\r\n        height: \"auto\",\r\n        maxHeight: \"330px\",\r\n        maxWidth: 230,\r\n        minWidth: 150,\r\n        flexGrow: 1,\r\n        position: \"relative\",\r\n\r\n        backgroundColor: (theme) =>\r\n          theme.palette.mode === \"dark\" ? \"#424200\" : \"#fff\",\r\n      }}\r\n    >\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid\r\n          item\r\n          sx={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <TextField\r\n            id=\"input-name\"\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            value={values.name}\r\n            // defaultValue={\"Enter Board Name\"}\r\n            error={hasFocus.name && !values.name}\r\n            helperText={hasFocus.name && !values.name ? \"Required!\" : \"\"}\r\n            autoComplete=\"off\"\r\n            onChange={handleChange}\r\n            onFocus={(event) => {\r\n              if (!event.target.value) {\r\n                setValues({\r\n                  ...values,\r\n                  name: \"\",\r\n                });\r\n              }\r\n              setHasFocus(() => {\r\n                return { ...hasFocus, name: true };\r\n              });\r\n              event.target.select();\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            component=\"div\"\r\n            size=\"small\"\r\n            sx={{\r\n              width: \"100%\",\r\n              padding: \"2px\",\r\n              backgroundColor: \"rgba(255,255,255,0.3)\",\r\n              // marginTop: \"5px\",\r\n              borderRadius: \"10px\",\r\n              borderWidth: \"1rem\",\r\n              borderColor: \"#1d1d1d\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n            }}\r\n            // ref={nameInputRef}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          sx={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <TextField\r\n            id=\"input-category\"\r\n            label=\"category\"\r\n            name=\"category\"\r\n            error={hasFocus.category && !values.category}\r\n            helperText={\r\n              hasFocus.category && !values.category ? \"Required!\" : \"\"\r\n            }\r\n            autoComplete=\"off\"\r\n            onChange={handleChange}\r\n            onFocus={(event) => {\r\n              if (!event.target.value) {\r\n                setValues({\r\n                  ...values,\r\n                  category: \"\",\r\n                });\r\n              }\r\n              setHasFocus(() => {\r\n                return { ...hasFocus, category: true };\r\n              });\r\n              event.target.select();\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            component=\"div\"\r\n            size=\"small\"\r\n            sx={{\r\n              width: \"100%\",\r\n              padding: \"2px\",\r\n              backgroundColor: \"rgba(255,255,255,0.3)\",\r\n              marginTop: \"5px\",\r\n              borderRadius: \"10px\",\r\n              borderWidth: \"1rem\",\r\n              borderColor: \"#1d1d1d\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n            }}\r\n            // ref={nameInputRef}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <IconButton\r\n            sx={{ width: 100, height: 100 }}\r\n            onClick={() => {\r\n              setOpenDialog(true);\r\n            }} //setOpenDialog(true)}\r\n          >\r\n            {values?.image ? (\r\n              <Img alt=\"img not found\" src={values?.image} component=\"img\" />\r\n            ) : (\r\n              <AddPhotoAlternateOutlinedIcon />\r\n            )}\r\n          </IconButton>\r\n          {/* <ButtonBase sx={{ width: 100, height: 100 }}>\r\n          </ButtonBase>*/}\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justifyContent=\"space-around\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\r\n            {\"上限  :\"}\r\n          </Typography>\r\n          <TextField\r\n            id=\"formatted-numberformat-input_limit\"\r\n            label=\"limit\"\r\n            value={values.limit}\r\n            onChange={handleChange}\r\n            name=\"limit\"\r\n            InputProps={{\r\n              inputComponent: NumberFormatCustom,\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            variant=\"standard\"\r\n            sx={{ width: \"50%\" }}\r\n            autoComplete=\"off\"\r\n            error={!values.limit}\r\n            helperText={!values.limit ? \"Required!\" : \"\"}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justifyContent=\"space-around\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Typography\r\n            gutterBottom\r\n            variant=\"subtitle1\"\r\n            component=\"div\"\r\n            visibility={\r\n              !(hasFocus.name && !values.name) &&\r\n              !(hasFocus.category && !values.category)\r\n                ? \"visible\"\r\n                : \"hidden\"\r\n            }\r\n          >\r\n            {\"庫存  :\"}\r\n          </Typography>\r\n          <TextField\r\n            id=\"formatted-numberformat-input_totalNum\"\r\n            label=\"stock\"\r\n            value={values.totalNum}\r\n            onChange={handleChange}\r\n            name=\"totalNum\"\r\n            InputProps={{\r\n              inputComponent: NumberFormatCustom,\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            variant=\"standard\"\r\n            sx={{\r\n              width: \"50%\",\r\n              display:\r\n                !(hasFocus.name && !values.name) &&\r\n                !(hasFocus.category && !values.category)\r\n                  ? \"block\"\r\n                  : \"none\",\r\n            }}\r\n            autoComplete=\"off\"\r\n            error={!values.totalNum}\r\n            helperText={!values.totalNum ? \"Required!\" : \"\"}\r\n            // visibility={!!values.name && !!values.category ? \"visible\" : \"hidden\"}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <ButtonBase\r\n        sx={{\r\n          width: \"30px\",\r\n          height: \"30px\",\r\n          borderRadius: \"20px\",\r\n          position: \"absolute\",\r\n          right: 0,\r\n          top: 0,\r\n        }}\r\n        onClick={() => {\r\n          setHasFocus(() => {\r\n            return { name: true, category: true };\r\n          });\r\n          let { name, limit, totalNum, category } = values;\r\n          if (name && limit && totalNum && category) {\r\n            setAddCardData(values);\r\n            // nameInputRef.current.value = \"\";\r\n          } else {\r\n            // // console.log(\"something missing: \", name, limit, totalNum);\r\n          }\r\n        }}\r\n      >\r\n        <AddCircleIcon />\r\n      </ButtonBase>\r\n      <ImgDialog\r\n        open={openDialog}\r\n        setOpenDialog={setOpenDialog}\r\n        uploadImg={uploadImg}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Box } from \"@mui/material/\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AdminCard from \"../../components/adminCard\";\r\nimport styled from \"styled-components\";\r\nimport TemplateCard from \"../../components/templateCard\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n/**\r\n * This is Main Page\r\n */\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 65vh;\r\n  margin: 5px 0 5px 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: start;\r\n  justify-content: center;\r\n  // overflow-y: scroll;\r\n`;\r\n\r\nexport default function BoardConsole({\r\n  keyWord,\r\n  saving,\r\n  setAbleSave,\r\n  setSaving,\r\n  cards,\r\n  setCards,\r\n  searchMethod,\r\n}) {\r\n  const history = useHistory();\r\n  const [addCardData, setAddCardData] = useState({});\r\n  const [delCardID, setDelCardID] = useState(0);\r\n  const [changedData, setChangedData] = useState([]);\r\n  const useStyles = makeStyles(() => ({\r\n    root: {\r\n      flexGrow: 1,\r\n      width: \"100%\",\r\n      height: \"80vh\",\r\n      overflow: \"auto\",\r\n    },\r\n    paper: {\r\n      background: \"rgb(0,0,0,.0)\",\r\n      boxShadow: \"none\",\r\n    },\r\n    text: {\r\n      margin: \"auto\",\r\n      textAlign: \"start\",\r\n      width: \"80%\",\r\n    },\r\n    time: {\r\n      margin: \"auto\",\r\n      color: \"#F5DE83\",\r\n      textAlign: \"end\",\r\n      width: \"70%\",\r\n      fontWeight: \"400\",\r\n    },\r\n  }));\r\n\r\n  const {\r\n    addBoard,\r\n    deleteBoard,\r\n    updateBoards,\r\n    getBoards,\r\n    addBoardData,\r\n    getBoardData,\r\n    updateBoardStatus,\r\n    showAlert,\r\n    setUpdateBoardStatus,\r\n    subscribe,\r\n  } = useMakeNTU();\r\n  const { userID, authority } = useSelector(selectSession);\r\n\r\n  useEffect(() => {\r\n    getBoards();\r\n    subscribe({ id: userID, authority: authority, page: \"adminBoardList\" });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (changedData.length === 0) return;\r\n    updateData();\r\n    setSaving(false);\r\n  }, [saving]);\r\n\r\n  useEffect(() => {\r\n    // // // console.log(\"hi\", changedData);\r\n    if (changedData.length !== 0) setAbleSave(true);\r\n    else setAbleSave(false);\r\n    // // console.log(\"change\", changedData);\r\n  }, [changedData]);\r\n\r\n  useEffect(() => {\r\n    if (updateBoardStatus === \"success\") {\r\n      setChangedData([]);\r\n      setUpdateBoardStatus(\"\");\r\n      // getBoards();\r\n      return;\r\n    }\r\n  }, [updateBoardStatus]);\r\n\r\n  const updateData = () => {\r\n    // // // console.log(\"updating\");\r\n    // // console.log(\"updating\", changedData);\r\n    updateBoards(changedData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (addCardData.name === undefined) return;\r\n    const exist = cards.filter((card) => card.name === addCardData.name.trim());\r\n    if (exist.length !== 0) {\r\n      showAlert(\"error\", `${addCardData.name.trim()} already exist!`);\r\n      // // // console.log(\"existed\");\r\n      return;\r\n    }\r\n    // // console.log(\"handling\", addCardData);\r\n    const newCard = {\r\n      ...addCardData,\r\n      id: uuidv4(),\r\n      remain: addCardData.totalNum,\r\n      // image: \"\",\r\n    };\r\n    addBoard(newCard);\r\n    setAddCardData({});\r\n  }, [addCardData]);\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(addBoardData).length === 0) return;\r\n    // // console.log(addBoardData);\r\n    setCards([addBoardData, ...cards]);\r\n  }, [addBoardData]);\r\n\r\n  useEffect(() => {\r\n    setCards(getBoardData);\r\n  }, [getBoardData]);\r\n\r\n  useEffect(() => {\r\n    if (cards.length === 0) return;\r\n    // const exist = cards.filter((card) => card.id === delCardID);\r\n    // // console.log(delCardID);\r\n    deleteBoard(delCardID); // talk to server\r\n    const remainCards = cards.filter((card) => card.id !== delCardID);\r\n\r\n    setChangedData(changedData.filter((card) => card.id !== delCardID));\r\n    // // // console.log(\"deleting\", exist);\r\n    setCards(remainCards);\r\n  }, [delCardID]);\r\n\r\n  const classes = useStyles();\r\n  const { isLogin } = useSelector(selectSession);\r\n  return (\r\n    <Wrapper>\r\n      <Box\r\n        sx={{\r\n          width: \"80%\",\r\n          height: \"100%\",\r\n          backgroundColor: \"rgba(255,255,255,0.6)\",\r\n          overflowY: \"scroll\",\r\n          overflowX: \"hidden\",\r\n          borderRadius: \"5px\",\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          justifyContent: \"space-around\",\r\n        }}\r\n      >\r\n        {<TemplateCard setAddCardData={setAddCardData} />}\r\n        {cards\r\n          .filter((card) => {\r\n            return (\r\n              (searchMethod === \"Name\" &&\r\n                card.name.toLowerCase().indexOf(keyWord.toLowerCase()) !==\r\n                  -1) ||\r\n              (searchMethod === \"Tag\" &&\r\n                card.category.toLowerCase().indexOf(keyWord.toLowerCase()) !==\r\n                  -1)\r\n            );\r\n          })\r\n          .map((card) => {\r\n            return (\r\n              <AdminCard\r\n                key={card?.name + card?.id}\r\n                data={card}\r\n                handleDeleteCard={setDelCardID}\r\n                changedData={changedData}\r\n                setChangedData={setChangedData}\r\n              ></AdminCard>\r\n            );\r\n          })}\r\n      </Box>\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport InputBase from \"@mui/material/InputBase\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport Radio from \"@mui/material/Radio\";\r\nimport RadioGroup from \"@mui/material/RadioGroup\";\r\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport { useMakeNTU } from \"../hooks/useMakeNTU\";\r\n\r\nfunction SearchBar({ handleChange, handleCheck, searchMethod }) {\r\n  const handleClick = (e) => {\r\n    handleCheck(e.target.value);\r\n  };\r\n  const { breakpoints } = useMakeNTU();\r\n\r\n  return (\r\n    <Paper\r\n      component=\"form\"\r\n      sx={{\r\n        p: \"2px 4px\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        width: \"75%\",\r\n        borderRadius: \"10px\",\r\n        backgroundColor: \"rgba(255,255,255,0.1)\",\r\n      }}\r\n    >\r\n      <FormControl>\r\n        <RadioGroup\r\n          row\r\n          aria-labelledby=\"demo-controlled-radio-buttons-group\"\r\n          name=\"controlled-radio-buttons-group\"\r\n          value={searchMethod}\r\n          onChange={handleClick}\r\n        >\r\n          <FormControlLabel\r\n            value=\"Name\"\r\n            control={<Radio />}\r\n            label=\"by Name\"\r\n            sx={{\r\n              display: breakpoints.isSm || breakpoints.isXs ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n          <FormControlLabel\r\n            value=\"Tag\"\r\n            control={<Radio />}\r\n            label=\"by Tag\"\r\n            sx={{\r\n              display: breakpoints.isSm || breakpoints.isXs ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n        </RadioGroup>\r\n      </FormControl>\r\n\r\n      <InputBase\r\n        sx={{ ml: 1, flex: 1 }}\r\n        placeholder={\r\n          breakpoints.isSm || breakpoints.isXs ? \"Search by name\" : \"Search\"\r\n        }\r\n        onChange={(e) => {\r\n          //   // console.log(e.target.value);\r\n          handleChange(e.target.value);\r\n        }}\r\n        onKeyDown={(e) => {\r\n          if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n          }\r\n        }}\r\n        // inputProps={{ \"aria-label\": \"search google maps\" }}\r\n      />\r\n\r\n      <IconButton\r\n        type=\"button\"\r\n        sx={{ p: \"10px\" }}\r\n        aria-label=\"search\"\r\n        onClick={(e) => handleChange(e.target.value)}\r\n      >\r\n        <SearchIcon />\r\n      </IconButton>\r\n    </Paper>\r\n  );\r\n}\r\nSearchBar.propTypes = {\r\n  handleChange: PropTypes.func.isRequired,\r\n};\r\nexport default SearchBar;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SearchBar from \"../../components/searchBar\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst FooterContainer = styled.div`\r\n  width: 100%;\r\n  height: auto;\r\n  display: flex;\r\n  margin: auto;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\nConsoleFooter.propTypes = {\r\n  setKeyWord: PropTypes.func.isRequired,\r\n};\r\nexport default function ConsoleFooter({\r\n  setKeyWord,\r\n  searchMethod,\r\n  handleCheck,\r\n}) {\r\n  return (\r\n    <FooterContainer>\r\n      <SearchBar\r\n        handleCheck={handleCheck}\r\n        handleChange={setKeyWord}\r\n        searchMethod={searchMethod}\r\n      />\r\n    </FooterContainer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ConsoleHeader from \"./ConsoleHeader\";\r\nimport BoardConsole from \"./BoardConsole\";\r\nimport ConsoleFooter from \"./ConsoleFooter\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function BoardPage() {\r\n  const [searchKeyWord, setKeyWord] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [ableSave, setAbleSave] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n  const [searchMethod, setSearchMethod] = React.useState(\"Name\");\r\n\r\n\r\n  return (\r\n    <div>\r\n      <ConsoleHeader setSaving={setSaving} ableSave={ableSave} data={cards} />\r\n      <BoardConsole\r\n        keyWord={searchKeyWord}\r\n        saving={saving}\r\n        setSaving={setSaving}\r\n        setAbleSave={setAbleSave}\r\n        cards={cards}\r\n        setCards={setCards}\r\n        searchMethod={searchMethod}\r\n      />\r\n      <ConsoleFooter searchMethod={searchMethod} handleCheck={setSearchMethod} setKeyWord={setKeyWord} />\r\n    </div>\r\n  );\r\n}\r\n","import TableCell from \"@mui/material/TableCell\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport { useEffect } from \"react\";\r\nfunction BoardRequestContentElement(props) {\r\n  const { card, changeReturn, numReturn, breakpoints } = props;\r\n  // const [num, setNum] = React.useState(0);\r\n  useEffect(() => {\r\n    changeReturn(card.board, 0, true);\r\n  }, []);\r\n  return (\r\n    <TableRow key={`${card}`}>\r\n      <TableCell\r\n        component=\"th\"\r\n        scope=\"row\"\r\n        sx={{ px: breakpoints?.isPhone ? \"3px\" : \"9px\" }}\r\n      >\r\n        {card.board}\r\n      </TableCell>\r\n      <TableCell>{card.quantity} 個</TableCell>\r\n      <TableCell>\r\n        <Chip\r\n          size=\"small\"\r\n          sx={{ fontSize: 20, m: 1 }}\r\n          label=\"-\"\r\n          variant=\"outlined\"\r\n          onClick={() => {\r\n            let newNum = parseInt(numReturn[card.board] - 1);\r\n            let valid = newNum <= card.quantity && newNum >= 0;\r\n            changeReturn(card.board, numReturn[card.board] - 1, valid);\r\n          }}\r\n        />\r\n        <TextField\r\n          id=\"outlined-name\"\r\n          value={numReturn[card.board]}\r\n          size=\"small\"\r\n          variant=\"standard\"\r\n          sx={{ width: \"6vh\", mt: 1 }}\r\n          onChange={(e) => {\r\n            // setNum(e.target.value);\r\n            let newNum = parseInt(e.target.value);\r\n            let valid = newNum <= card.quantity && newNum >= 0;\r\n            changeReturn(card.board, e.target.value, valid || !e.target.value);\r\n          }}\r\n        />\r\n\r\n        <Chip\r\n          size=\"small\"\r\n          label=\"+\"\r\n          variant=\"outlined\"\r\n          onClick={() => {\r\n            let newNum = parseInt(numReturn[card.board] + 1);\r\n            let valid = newNum <= card.quantity && newNum >= 0;\r\n            changeReturn(card.board, numReturn[card.board] + 1, valid);\r\n          }}\r\n          sx={{ m: 1 }}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\nexport default BoardRequestContentElement;\r\n","import * as React from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Collapse from \"@mui/material/Collapse\";\r\nimport Box from \"@mui/material/Box\";\r\nimport GroupContentElement from \"./GroupContentElement\";\r\nimport { useMakeNTU } from \"../../../hooks/useMakeNTU\";\r\nfunction GroupContent(props) {\r\n  const { team, open, breakpoints } = props;\r\n  const [numReturn, setNumReturn] = React.useState({});\r\n  const [boards, setBoards] = React.useState([]);\r\n  const { updateReturn, showAlert } = useMakeNTU();\r\n  const handleEdit = () => {\r\n    // console.log(team, numReturn);\r\n    for (const [key, value] of Object.entries(numReturn)) {\r\n      if (isNaN(value)) {\r\n        showAlert(\"error\", \"Please Enter Number!\");\r\n        return;\r\n      }\r\n    }\r\n    updateReturn({ id: team.id, returned: numReturn });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    // let newBoards = [];\r\n    if (!team?.myCards) return;\r\n    if (Object.keys(team.myCards).length === 0) return;\r\n    // // console.log(Object.keys(team.myCards));\r\n    let newReturn;\r\n    let newBoards = Object.keys(team.myCards).map((key) => {\r\n      newReturn = { ...newReturn, [key]: 0 };\r\n      return {\r\n        board: key,\r\n        quantity: team.myCards[key],\r\n      };\r\n    });\r\n    setNumReturn(newReturn);\r\n    // // console.log(\"team\", newBoards);\r\n    setBoards(newBoards);\r\n  }, [team]);\r\n\r\n  const changeReturn = (name, num, valid) => {\r\n    let a = JSON.parse(JSON.stringify(numReturn));\r\n    if (!valid) return;\r\n    setNumReturn({ ...a, [name]: num });\r\n  };\r\n  return (\r\n    <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\r\n      <Collapse in={open}>\r\n        <Table size=\"small\" sx={{ m: 1 }}>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Boards</TableCell>\r\n              <TableCell>Quantity</TableCell>\r\n              <TableCell>Returned</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <React.Fragment>\r\n              {boards.map((card, index) => (\r\n                <GroupContentElement\r\n                  key={`${card}+${index}`}\r\n                  changeReturn={changeReturn}\r\n                  card={card}\r\n                  numReturn={numReturn}\r\n                  index={index}\r\n                  breakpoints={breakpoints}\r\n                />\r\n              ))}\r\n            </React.Fragment>\r\n          </TableBody>\r\n        </Table>\r\n\r\n        <Box sx={{ margin: 1, display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n          <Chip\r\n            label=\"Edit\"\r\n            variant=\"outlined\"\r\n            onClick={handleEdit}\r\n            sx={{ fontSize: 17 }}\r\n          />\r\n        </Box>\r\n      </Collapse>\r\n    </TableCell>\r\n  );\r\n}\r\n\r\nexport default GroupContent;\r\n","import * as React from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport GroupContent from \"./GroupContent\";\r\n\r\nfunction BoardRequest(props) {\r\n  //every team\r\n  const { team, breakpoints } = props;\r\n  const [open, setOpen] = React.useState(false);\r\n  // // console.log(team?.myCards);\r\n  React.useEffect(() => {\r\n    const notReturned = team?.myCards ? Object.keys(team?.myCards).length : 0;\r\n\r\n    if (notReturned === 0) setOpen(false);\r\n  }, [team]);\r\n  const notReturned = team?.myCards ? Object.keys(team?.myCards).length : 0;\r\n  return (\r\n    <React.Fragment>\r\n      <TableRow sx={{ \"& > *\": { borderBottom: \"unset\" }, maxHeight: \"10vh\" }}>\r\n        <TableCell align=\"left\">{team?.teamName ?? \"undefined\"}</TableCell>\r\n\r\n        {notReturned === 0 ? (\r\n          <>\r\n            <TableCell align=\"center\">已歸還</TableCell>\r\n            <TableCell align=\"right\" />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <TableCell align=\"center\">{`${notReturned} 種未歸還`}</TableCell>\r\n            <TableCell align=\"right\">\r\n              <IconButton\r\n                aria-label=\"expand row\"\r\n                size=\"small\"\r\n                onClick={() => setOpen(!open)}\r\n              >\r\n                {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\r\n              </IconButton>\r\n            </TableCell>\r\n          </>\r\n        )}\r\n      </TableRow>\r\n      <TableRow>\r\n        <GroupContent team={team} open={open} breakpoints={breakpoints} />\r\n      </TableRow>\r\n    </React.Fragment>\r\n  );\r\n}\r\n/*\r\nRow.propTypes = {\r\n  row: PropTypes.shape({\r\n    calories: PropTypes.number.isRequired,\r\n    carbs: PropTypes.number.isRequired,\r\n    fat: PropTypes.number.isRequired,\r\n    history: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        amount: PropTypes.number.isRequired,\r\n        customerId: PropTypes.string.isRequired,\r\n        date: PropTypes.string.isRequired,\r\n      })\r\n    ).isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    price: PropTypes.number.isRequired,\r\n    protein: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n};\r\n*/\r\nexport default BoardRequest;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  Box,\r\n  Paper,\r\n} from \"@mui/material/\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\nimport GroupStatus from \"./components/GroupStatus\";\r\nimport { TeamDataAPI } from \"../../api\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\n\r\n/**\r\n * This is Main Page\r\n */\r\n\r\nexport default function StatusConsole() {\r\n  const [userStatus, setUserStatus] = useState([]);\r\n  const [changedData, setChangedData] = useState([]);\r\n  const useStyles = makeStyles(() => ({\r\n    root: {\r\n      flexGrow: 1,\r\n      width: \"100%\",\r\n      height: \"80vh\",\r\n      overflow: \"auto\",\r\n    },\r\n    paper: {\r\n      background: \"rgb(0,0,0,.0)\",\r\n      boxShadow: \"none\",\r\n    },\r\n    text: {\r\n      margin: \"auto\",\r\n      textAlign: \"start\",\r\n      width: \"80%\",\r\n    },\r\n    time: {\r\n      margin: \"auto\",\r\n      color: \"#F5DE83\",\r\n      textAlign: \"end\",\r\n      width: \"70%\",\r\n      fontWeight: \"400\",\r\n    },\r\n  }));\r\n  const { requestData, teamReqUpdateDate } = useMakeNTU();\r\n  useEffect(async () => {\r\n    //獲取user資料\r\n    // console.log(\"fetching data...\");\r\n    const { data: userData } = await TeamDataAPI.getTeamData();\r\n    // console.log(userData);\r\n    setUserStatus(userData);\r\n  }, [requestData, teamReqUpdateDate]);\r\n\r\n  useEffect(() => {\r\n    // console.log(changedData);\r\n  }, [changedData]);\r\n\r\n  const classes = useStyles();\r\n  const { isLogin } = useSelector(selectSession);\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: \"rgba(255,255,255,0.6)\",\r\n        overflowX: \"hidden\",\r\n        borderRadius: \"5px\",\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"space-around\",\r\n      }}\r\n    >\r\n      <TableContainer component={Paper}>\r\n        <Table aria-label=\"collapsible table\">\r\n          <TableHead>\r\n            <TableRow\r\n              sx={{\r\n                backgroundColor: \"rgba(255,255,255,0.2)\",\r\n                alignItems: \"middle\",\r\n                maxHeight: \"10vh\",\r\n              }}\r\n            >\r\n              <TableCell />\r\n              <TableCell\r\n                sx={{\r\n                  fontWeight: \"bold\",\r\n                  fontSize: \"h5.fontSize\",\r\n                }}\r\n                align=\"center\"\r\n              >\r\n                TEAM STATUS\r\n              </TableCell>\r\n              <TableCell />\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {userStatus\r\n              ?.filter((team) => team.authority !== 1)\r\n              .sort((teamA, teamB) => {\r\n                const notReturned_A = teamA?.myCards\r\n                  ? Object.keys(teamA?.myCards).length\r\n                  : 0;\r\n                const notReturned_B = teamB?.myCards\r\n                  ? Object.keys(teamB?.myCards).length\r\n                  : 0;\r\n\r\n                return notReturned_A - notReturned_B === 0\r\n                  ? parseInt(teamA.id) - parseInt(teamB.id)\r\n                  : -(notReturned_A - notReturned_B);\r\n              })\r\n              .map((team) => {\r\n                return (\r\n                  <GroupStatus\r\n                    key={`${team?.name}+ ${team?.id}`}\r\n                    team={team}\r\n                  ></GroupStatus>\r\n                );\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Collapse from \"@mui/material/Collapse\";\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport { useMakeNTU } from \"../../../hooks/useMakeNTU\";\r\nconst GroupStatusContent = (props) => {\r\n  const { data, open } = props;\r\n  const { updateReq, deleteRequestFromUser } = useMakeNTU();\r\n  const handleAsk = () => {\r\n    if (!data?._id) {\r\n      // console.log(\"missing requestID: \", data?._id);\r\n      return;\r\n    }\r\n    updateReq({ requestID: data?._id, requestStatus: \"ready\" });\r\n  };\r\n  const handleDenied = () => {\r\n    if (!data?._id) {\r\n      // console.log(\"missing requestID: \", data?._id);\r\n      return;\r\n    }\r\n    updateReq({ requestID: data?._id, requestStatus: \"denied\" });\r\n  };\r\n  const handleCancel = () => {\r\n    if (!data?._id) {\r\n      // console.log(\"missing requestID: \", data?._id);\r\n      return;\r\n    }\r\n    updateReq({ requestID: data?._id, requestStatus: \"cancel\" });\r\n  };\r\n  const handleTook = () => {\r\n    if (!data?._id) {\r\n      // console.log(\"missing requestID: \", data?._id);\r\n      return;\r\n    }\r\n    updateReq({ requestID: data?._id, requestStatus: \"solved\" });\r\n    deleteRequestFromUser([data.borrower.teamID, data?._id]);\r\n  };\r\n  return (\r\n    <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <Box sx={{ margin: 1 }}>\r\n          <Table size=\"small\" sx={{ m: 1 }}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Board</TableCell>\r\n                <TableCell>Amount</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data?.requestBody?.map((detail) => (\r\n                <TableRow key={`${data?._id}${detail?.board}`}>\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    {detail?.board}\r\n                  </TableCell>\r\n                  <TableCell>{detail?.quantity}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </Box>\r\n        <Box sx={{ margin: 1, display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n          {data?.status === \"pending\" ? (\r\n            <>\r\n              <Chip\r\n                label=\"呼叫\"\r\n                variant=\"outlined\"\r\n                onClick={handleAsk}\r\n                sx={{ ml: 1 }}\r\n              />\r\n              <Chip\r\n                label=\"拒絕\"\r\n                variant=\"outlined\"\r\n                onClick={handleDenied}\r\n                sx={{ ml: 1 }}\r\n              />\r\n            </>\r\n          ) : data?.status === \"ready\" ? (\r\n            <>\r\n              <Chip\r\n                label=\"已領取\"\r\n                variant=\"outlined\"\r\n                onClick={handleTook}\r\n                sx={{ ml: 1 }}\r\n              />\r\n              <Chip\r\n                label=\"取消\"\r\n                variant=\"outlined\"\r\n                onClick={handleCancel}\r\n                sx={{ ml: 1 }}\r\n              />\r\n            </>\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </Box>\r\n      </Collapse>\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport default GroupStatusContent;\r\n","import * as React from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport GroupStatusContent from \"./RequestStatusContent\";\r\nimport { useMakeNTU } from \"../../../hooks/useMakeNTU\";\r\nfunction RequestStatus(props) {\r\n  //every request\r\n  const { data, breakpoints } = props;\r\n  // // console.log(data);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [timer, setTimer] = React.useState(0);\r\n  const [intervalId, setIntervalID] = React.useState(0);\r\n  const { getRequest } = useMakeNTU();\r\n  // // console.log(breakpoints);\r\n  React.useEffect(() => {\r\n    const d = new Date().getTime(); //number\r\n    const pretime = 15 * 60 - Math.floor(d - data?.sendingTime) / 1000;\r\n    setTimer(pretime);\r\n    if (data?.status === \"pending\" || data?.status === \"ready\") {\r\n      let Id = setInterval(() => {\r\n        setTimer((t) => t - 1);\r\n      }, 1000);\r\n      setIntervalID(Id);\r\n      return () => clearInterval(Id);\r\n    } else {\r\n      setTimer(0);\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (timer < 0) {\r\n      clearInterval(intervalId);\r\n      getRequest();\r\n    }\r\n  }, [timer]);\r\n\r\n  const showTime = () => {\r\n    if (\r\n      data?.status === \"denied\" ||\r\n      data?.status === \"cancel\" ||\r\n      data?.status === \"expired\"\r\n    ) {\r\n      return \"00 : 00\";\r\n    }\r\n    if (timer <= 0) return \"00 : 00\";\r\n    const sec =\r\n      (timer % 60) / 10 < 1\r\n        ? \"0\" + Math.floor(timer % 60)\r\n        : Math.floor(timer % 60);\r\n    const min =\r\n      timer / 60 / 10 < 1\r\n        ? \"0\" + Math.floor(timer / 60)\r\n        : Math.floor(timer / 60);\r\n    return `${min} : ${sec}`;\r\n  };\r\n  const statusTEXT = {\r\n    pending: \"申請中\",\r\n    solved: \"已領取\",\r\n    ready: \"呼叫中\",\r\n    denied: \"已拒絕\",\r\n    cancel: \"已取消\",\r\n    expired: \"已逾期\",\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      <TableRow sx={{ \"& > *\": { borderBottom: \"unset\" }, maxHeight: \"10vh\" }}>\r\n        <TableCell align={breakpoints.isXs ? \"center\" : \"left\"}>\r\n          {data?.borrower?.teamName ?? \"undefined\"}\r\n        </TableCell>\r\n        {breakpoints.isXs ? (\r\n          <></>\r\n        ) : (\r\n          <TableCell\r\n            align=\"center\"\r\n            sx={{\r\n              color: timer < 60 ? \"#FF1212\" : \"white\",\r\n            }}\r\n          >\r\n            {showTime() ?? \"undefined\"}\r\n          </TableCell>\r\n        )}\r\n        <TableCell align=\"center\">\r\n          {statusTEXT[data?.status] ?? \"未知\"}\r\n        </TableCell>\r\n        <TableCell align=\"right\">\r\n          <IconButton\r\n            aria-label=\"expand row\"\r\n            size=\"small\"\r\n            onClick={() => setOpen(!open)}\r\n          >\r\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\r\n          </IconButton>\r\n        </TableCell>\r\n      </TableRow>\r\n      <TableRow>\r\n        <GroupStatusContent data={data} open={open} />\r\n      </TableRow>\r\n    </React.Fragment>\r\n  );\r\n}\r\n/*\r\nRow.propTypes = {\r\n  row: PropTypes.shape({\r\n    calories: PropTypes.number.isRequired,\r\n    carbs: PropTypes.number.isRequired,\r\n    fat: PropTypes.number.isRequired,\r\n    history: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        amount: PropTypes.number.isRequired,\r\n        customerId: PropTypes.string.isRequired,\r\n        date: PropTypes.string.isRequired,\r\n      })\r\n    ).isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    price: PropTypes.number.isRequired,\r\n    protein: PropTypes.number.isRequired,\r\n  }).isRequired,\r\n};\r\n*/\r\nexport default RequestStatus;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableContainer,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport styled from \"styled-components\";\r\nimport RequestStatus from \"./components/RequestStatus\";\r\nimport StatusConsole from \"./StatusConsole\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nconst Wrapper = styled.div`\r\n  width: 49%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: start;\r\n  justify-content: center;\r\n  background-color: rgba(255, 255, 255, 0.4);\r\n  border-radius: 3px;\r\n  border: 3px solid;\r\n  @media screen and (max-width: 700px) {\r\n    width: 100%;\r\n  } ;\r\n`;\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      style={{ width: \"100%\", height: \"90%\" }}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            paddingRight: \"10px\",\r\n            overflowX: \"hidden\",\r\n            borderRadius: \"5px\",\r\n          }}\r\n        >\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.number.isRequired,\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    \"aria-controls\": `simple-tabpanel-${index}`,\r\n  };\r\n}\r\nconst someReqs = [\r\n  {\r\n    id: 1,\r\n    name: \"aaa\",\r\n    status: \"solved\",\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"bbb\",\r\n    status: \"unSolved\",\r\n  },\r\n];\r\nexport default function RequestConsole({ breakpoints }) {\r\n  const [value, setValue] = useState(0);\r\n  const [requests, setRequests] = useState([]);\r\n  const { requestData, getRequest } = useMakeNTU();\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  useEffect(() => {\r\n    //獲取user資料\r\n    // console.log(\"fetching data...\");\r\n    getRequest();\r\n  }, []);\r\n  useEffect(() => {\r\n    // console.log(\"requestData\", requestData);\r\n    setRequests(requestData);\r\n  }, [requestData]);\r\n  return (\r\n    <Wrapper>\r\n      <Box\r\n        sx={{\r\n          width: \"100%\",\r\n          height: \"10%\",\r\n          borderBottom: 2,\r\n          borderColor: \"divider\",\r\n          backgroundColor: \"rgba(0,0,0,0.1)\",\r\n          color: \"primary\",\r\n        }}\r\n      >\r\n        <Tabs\r\n          value={value}\r\n          scrollButtons=\"auto\"\r\n          variant=\"scrollable\"\r\n          indicatorColor=\"secondary\"\r\n          textColor=\"secondary\"\r\n          onChange={handleChange}\r\n          aria-label=\"basic tabs example\"\r\n        >\r\n          <Tab label=\"未完成\" {...a11yProps(0)} />\r\n          <Tab label=\"已完成\" {...a11yProps(1)} />\r\n          <Tab label=\"已拒絕\" {...a11yProps(2)} />\r\n          <Tab label=\"已取消\" {...a11yProps(3)} />\r\n          <Tab\r\n            label=\"各組租借\"\r\n            {...a11yProps(4)}\r\n            sx={{\r\n              display: breakpoints.isSm || breakpoints.isXs ? \"block\" : \"none\",\r\n            }}\r\n          />\r\n        </Tabs>\r\n      </Box>\r\n      <TabPanel value={value} index={0}>\r\n        <TableContainer\r\n          component={Paper}\r\n          sx={{ overflowX: \"hidden\", overflowY: \"auto\" }}\r\n        >\r\n          <Table aria-label=\"collapsible table\">\r\n            <TableBody>\r\n              {requests\r\n                .filter(\r\n                  (request) =>\r\n                    request?.status?.toUpperCase() !== \"solved\".toUpperCase() &&\r\n                    request?.status?.toUpperCase() !== \"denied\".toUpperCase() &&\r\n                    request?.status?.toUpperCase() !== \"cancel\".toUpperCase() &&\r\n                    request?.status?.toUpperCase() !== \"expired\".toUpperCase()\r\n                )\r\n                .map((request) => {\r\n                  return (\r\n                    <RequestStatus\r\n                      key={`${request?.sendingTime}+ ${request?.requestID}`}\r\n                      data={request}\r\n                      breakpoints={breakpoints}\r\n                    ></RequestStatus>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <TableContainer\r\n          component={Paper}\r\n          sx={{ overflowX: \"hidden\", overflowY: \"auto\" }}\r\n        >\r\n          <Table aria-label=\"collapsible table\">\r\n            <TableBody>\r\n              {requests\r\n                .filter(\r\n                  (request) =>\r\n                    request?.status?.toUpperCase() === \"solved\".toUpperCase()\r\n                )\r\n                .map((request) => {\r\n                  return (\r\n                    <RequestStatus\r\n                      key={`${request?.sendingTime}+ ${request?.requestID}`}\r\n                      data={request}\r\n                      breakpoints={breakpoints}\r\n                    ></RequestStatus>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <TableContainer\r\n          component={Paper}\r\n          sx={{ overflowX: \"hidden\", overflowY: \"auto\" }}\r\n        >\r\n          <Table aria-label=\"collapsible table\">\r\n            <TableBody>\r\n              {requests\r\n                .filter(\r\n                  (request) =>\r\n                    request?.status?.toUpperCase() === \"denied\".toUpperCase()\r\n                )\r\n                .map((request) => {\r\n                  return (\r\n                    <RequestStatus\r\n                      key={`${request?.sendingTime}+ ${request?.requestID}`}\r\n                      data={request}\r\n                      breakpoints={breakpoints}\r\n                    ></RequestStatus>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <TableContainer\r\n          component={Paper}\r\n          sx={{ overflowX: \"hidden\", overflowY: \"auto\" }}\r\n        >\r\n          <Table aria-label=\"collapsible table\">\r\n            <TableBody>\r\n              {requests\r\n                .filter(\r\n                  (request) =>\r\n                    request?.status?.toUpperCase() === \"cancel\".toUpperCase() ||\r\n                    request?.status?.toUpperCase() === \"expired\".toUpperCase()\r\n                )\r\n                .map((request) => {\r\n                  return (\r\n                    <RequestStatus\r\n                      key={`${request?.sendingTime}+ ${request?.requestID}`}\r\n                      data={request}\r\n                      breakpoints={breakpoints}\r\n                    ></RequestStatus>\r\n                  );\r\n                })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        {breakpoints.isSm || breakpoints.isXs ? (\r\n          <StatusConsole breakpoints={breakpoints} />\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </TabPanel>\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport StatusConsole from \"./StatusConsole\";\r\nimport RequestConsole from \"./RequestConsole\";\r\nimport styled from \"styled-components\";\r\nimport { useMakeNTU } from \"../../hooks/useMakeNTU\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectSession } from \"../../slices/sessionSlice\";\r\n\r\nconst ConsoleWrapper = styled.div`\r\n  width: 100%;\r\n  height: 80vh;\r\n  margin: 5px 0 5px 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: start;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 45%;\r\n  height: 100%;\r\n`;\r\nexport default function RequestPage() {\r\n  const { breakpoints, subscribe } = useMakeNTU();\r\n  const { userID, authority } = useSelector(selectSession);\r\n\r\n  useEffect(() => {\r\n    subscribe({ id: userID, authority: authority, page: \"requestStatus\" });\r\n  }, []);\r\n  return (\r\n    <ConsoleWrapper>\r\n      <RequestConsole breakpoints={breakpoints} />\r\n      {breakpoints.isSm || breakpoints.isXs ? (\r\n        <></>\r\n      ) : (\r\n        <Wrapper>\r\n          <StatusConsole breakpoints={breakpoints} />\r\n        </Wrapper>\r\n      )}\r\n    </ConsoleWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport CssBaseline from \"@mui/material/CssBaseline\";\r\nimport Container from \"@mui/material/Container\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport { makeStyles } from \"@mui/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    justifyContent: \"center\",\r\n    minHeight: \"100vh\",\r\n  },\r\n  progress: {\r\n    marginTop: \"30vh\",\r\n  },\r\n});\r\nconst Loading = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Container component=\"div\" maxWidth=\"lg\">\r\n      <CssBaseline />\r\n      <Grid container className={classes.root}>\r\n        <Grid item className={classes.progress}>\r\n          <CircularProgress />\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Switch, BrowserRouter as Router } from \"react-router-dom\";\r\n\r\n// Route\r\nimport { Redirect } from \"react-router\";\r\nimport PublicRoute from \"./components/routes/publicRoute\";\r\nimport PrivateRoute from \"./components/routes/privateRoute\";\r\nimport LoginRoute from \"./components/routes/loginRoute\";\r\nimport MainRoute from \"./components/routes/mainRoute\";\r\nimport UserRoute from \"./components/routes/userRoute\";\r\n// containers\r\nimport Drawer from \"./containers/drawer\";\r\nimport Main from \"./containers/main\";\r\nimport Login from \"./containers/login\";\r\nimport UserProgress from \"./containers/userProgress\";\r\nimport UserStatus from \"./containers/userStatus\";\r\nimport TeamData from \"./containers/teamData\";\r\nimport AdminBoardList from \"./containers/adminBoardList\";\r\nimport RequestStatus from \"./containers/requestStatus\";\r\n\r\n// compononets\r\nimport Loading from \"./components/loading\";\r\n// initialize, slices\r\nimport { init, selectSession } from \"./slices/sessionSlice\";\r\n\r\nconst Routes = () => {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(init());\r\n  }, []);\r\n  const { initialized } = useSelector(selectSession);\r\n  return !initialized ? (\r\n    <Loading />\r\n  ) : (\r\n    <Switch>\r\n      <MainRoute exact path=\"/\">\r\n        <Main />\r\n      </MainRoute>\r\n      <LoginRoute exact path=\"/login\">\r\n        <Login />\r\n      </LoginRoute>\r\n      <PrivateRoute exact path=\"/teamdata\">\r\n        <TeamData />\r\n      </PrivateRoute>\r\n      <PrivateRoute exact path=\"/boardlist\">\r\n        <AdminBoardList />\r\n      </PrivateRoute>\r\n      <UserRoute exact path=\"/user\">\r\n        <UserProgress />\r\n      </UserRoute>\r\n      <UserRoute exact path=\"/user/status\">\r\n        <UserStatus />\r\n      </UserRoute>\r\n      <PrivateRoute exact path=\"/requestStatus\">\r\n        <RequestStatus />\r\n      </PrivateRoute>\r\n      <Redirect to=\"/login\" />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default function App() {\r\n  return (\r\n    <div style={{ userSelect: \"none\" }}>\r\n      <Router>\r\n        <Drawer>\r\n          <Routes />\r\n        </Drawer>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport sessionReducer from \"../slices/sessionSlice\";\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    session: sessionReducer,\r\n  },\r\n});\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { createTheme } from \"@mui/material/styles\";\r\n\r\nconst theme = createTheme({\r\n  typography: {\r\n    fontFamily: [\"Ubuntu Condensed\", \"sans-serif\"].join(\",\"),\r\n    fontSize: 15,\r\n  },\r\n  palette: {\r\n    mode: \"dark\",\r\n    primary: {\r\n      light: \"#0066ff\",\r\n      main: \"#35524A\",\r\n      // dark: will be calculated from palette.secondary.main,\r\n      contrastText: \"#E8E394\",\r\n    },\r\n    secondary: {\r\n      main: \"#E8E394\",\r\n      light: \"#c1e5e2\",\r\n      contrastText: \"#35524A\",\r\n    },\r\n    background: {\r\n      paper: \"rgba(0, 0, 0, 1)\",\r\n    },\r\n  },\r\n  breakpoints: {\r\n    values: {\r\n      xs: 0,\r\n      sm: 600,\r\n      phone: 700,\r\n      md: 960,\r\n      lg: 1050,\r\n      xl: 1920,\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      \"@global\": {\r\n        body: {\r\n          background: \"linear-gradient(170deg, #192231 70%, #B6A19E 10%)\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          backgroundAttachment: \"fixed\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport { MakeNTUProvider } from \"./hooks/useMakeNTU\";\r\nimport { ThemeProvider } from \"@mui/material/styles\";\r\nimport theme from \"./theme\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ThemeProvider theme={theme}>\r\n      <Provider store={store}>\r\n        <MakeNTUProvider>\r\n          <App />\r\n        </MakeNTUProvider>\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}